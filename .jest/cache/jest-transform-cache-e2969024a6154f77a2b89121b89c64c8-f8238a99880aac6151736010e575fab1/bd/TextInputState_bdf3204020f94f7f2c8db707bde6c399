de24fddde320156340b425f99bd42707
'use strict';

var _AndroidTextInputNativeComponent = require("../../Components/TextInput/AndroidTextInputNativeComponent");

var _RCTSingelineTextInputNativeComponent = require("../../Components/TextInput/RCTSingelineTextInputNativeComponent");

var React = require('react');

var Platform = require("../../Utilities/Platform");

var _require = require("../../Renderer/shims/ReactNative"),
    findNodeHandle = _require.findNodeHandle;

var currentlyFocusedInputRef = null;
var inputs = new Set();

function currentlyFocusedInput() {
  return currentlyFocusedInputRef;
}

function currentlyFocusedField() {
  if (__DEV__) {
    console.error('currentlyFocusedField is deprecated and will be removed in a future release. Use currentlyFocusedInput');
  }

  return findNodeHandle(currentlyFocusedInputRef);
}

function focusInput(textField) {
  if (currentlyFocusedInputRef !== textField && textField != null) {
    currentlyFocusedInputRef = textField;
  }
}

function blurInput(textField) {
  if (currentlyFocusedInputRef === textField && textField != null) {
    currentlyFocusedInputRef = null;
  }
}

function focusField(textFieldID) {
  if (__DEV__) {
    console.error('focusField no longer works. Use focusInput');
  }

  return;
}

function blurField(textFieldID) {
  if (__DEV__) {
    console.error('blurField no longer works. Use blurInput');
  }

  return;
}

function focusTextInput(textField) {
  if (typeof textField === 'number') {
    if (__DEV__) {
      console.error('focusTextInput must be called with a host component. Passing a react tag is deprecated.');
    }

    return;
  }

  if (currentlyFocusedInputRef !== textField && textField != null) {
    focusInput(textField);

    if (Platform.OS === 'ios') {
      _RCTSingelineTextInputNativeComponent.Commands.focus(textField);
    } else if (Platform.OS === 'android') {
      _AndroidTextInputNativeComponent.Commands.focus(textField);
    }
  }
}

function blurTextInput(textField) {
  if (typeof textField === 'number') {
    if (__DEV__) {
      console.error('focusTextInput must be called with a host component. Passing a react tag is deprecated.');
    }

    return;
  }

  if (currentlyFocusedInputRef === textField && textField != null) {
    blurInput(textField);

    if (Platform.OS === 'ios') {
      _RCTSingelineTextInputNativeComponent.Commands.blur(textField);
    } else if (Platform.OS === 'android') {
      _AndroidTextInputNativeComponent.Commands.blur(textField);
    }
  }
}

function registerInput(textField) {
  if (typeof textField === 'number') {
    if (__DEV__) {
      console.error('registerInput must be called with a host component. Passing a react tag is deprecated.');
    }

    return;
  }

  inputs.add(textField);
}

function unregisterInput(textField) {
  if (typeof textField === 'number') {
    if (__DEV__) {
      console.error('unregisterInput must be called with a host component. Passing a react tag is deprecated.');
    }

    return;
  }

  inputs.delete(textField);
}

function isTextInput(textField) {
  if (typeof textField === 'number') {
    if (__DEV__) {
      console.error('isTextInput must be called with a host component. Passing a react tag is deprecated.');
    }

    return false;
  }

  return inputs.has(textField);
}

module.exports = {
  currentlyFocusedInput: currentlyFocusedInput,
  focusInput: focusInput,
  blurInput: blurInput,
  currentlyFocusedField: currentlyFocusedField,
  focusField: focusField,
  blurField: blurField,
  focusTextInput: focusTextInput,
  blurTextInput: blurTextInput,
  registerInput: registerInput,
  unregisterInput: unregisterInput,
  isTextInput: isTextInput
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRleHRJbnB1dFN0YXRlLmpzIl0sIm5hbWVzIjpbIlJlYWN0IiwicmVxdWlyZSIsIlBsYXRmb3JtIiwiZmluZE5vZGVIYW5kbGUiLCJjdXJyZW50bHlGb2N1c2VkSW5wdXRSZWYiLCJpbnB1dHMiLCJTZXQiLCJjdXJyZW50bHlGb2N1c2VkSW5wdXQiLCJjdXJyZW50bHlGb2N1c2VkRmllbGQiLCJfX0RFVl9fIiwiY29uc29sZSIsImVycm9yIiwiZm9jdXNJbnB1dCIsInRleHRGaWVsZCIsImJsdXJJbnB1dCIsImZvY3VzRmllbGQiLCJ0ZXh0RmllbGRJRCIsImJsdXJGaWVsZCIsImZvY3VzVGV4dElucHV0IiwiT1MiLCJpT1NUZXh0SW5wdXRDb21tYW5kcyIsImZvY3VzIiwiQW5kcm9pZFRleHRJbnB1dENvbW1hbmRzIiwiYmx1clRleHRJbnB1dCIsImJsdXIiLCJyZWdpc3RlcklucHV0IiwiYWRkIiwidW5yZWdpc3RlcklucHV0IiwiZGVsZXRlIiwiaXNUZXh0SW5wdXQiLCJoYXMiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFjQTs7QUFLQTs7QUFDQTs7QUFKQSxJQUFNQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxPQUFELENBQXJCOztBQUNBLElBQU1DLFFBQVEsR0FBR0QsT0FBTyw0QkFBeEI7O2VBQ3lCQSxPQUFPLG9DO0lBQXpCRSxjLFlBQUFBLGM7O0FBT1AsSUFBSUMsd0JBQXVDLEdBQUcsSUFBOUM7QUFDQSxJQUFNQyxNQUFNLEdBQUcsSUFBSUMsR0FBSixFQUFmOztBQUVBLFNBQVNDLHFCQUFULEdBQWdEO0FBQzlDLFNBQU9ILHdCQUFQO0FBQ0Q7O0FBTUQsU0FBU0kscUJBQVQsR0FBMEM7QUFDeEMsTUFBSUMsT0FBSixFQUFhO0FBQ1hDLElBQUFBLE9BQU8sQ0FBQ0MsS0FBUixDQUNFLHdHQURGO0FBR0Q7O0FBRUQsU0FBT1IsY0FBYyxDQUFDQyx3QkFBRCxDQUFyQjtBQUNEOztBQUVELFNBQVNRLFVBQVQsQ0FBb0JDLFNBQXBC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QixRQUF6QixFQUFtQztBQUNqQyxRQUFJSixPQUFKLEVBQWE7QUFDWEMsTUFBQUEsT0FBTyxDQUFDQyxLQUFSLENBQ0Usc0ZBREY7QUFHRDs7QUFFRCxXQUFPLEtBQVA7QUFDRDs7QUFFRCxTQUFPTixNQUFNLENBQUN5QixHQUFQLENBQVdqQixTQUFYLENBQVA7QUFDRDs7QUFFRGtCLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjtBQUNmekIsRUFBQUEscUJBQXFCLEVBQXJCQSxxQkFEZTtBQUVmSyxFQUFBQSxVQUFVLEVBQVZBLFVBRmU7QUFHZkUsRUFBQUEsU0FBUyxFQUFUQSxTQUhlO0FBS2ZOLEVBQUFBLHFCQUFxQixFQUFyQkEscUJBTGU7QUFNZk8sRUFBQUEsVUFBVSxFQUFWQSxVQU5lO0FBT2ZFLEVBQUFBLFNBQVMsRUFBVEEsU0FQZTtBQVFmQyxFQUFBQSxjQUFjLEVBQWRBLGNBUmU7QUFTZkssRUFBQUEsYUFBYSxFQUFiQSxhQVRlO0FBVWZFLEVBQUFBLGFBQWEsRUFBYkEsYUFWZTtBQVdmRSxFQUFBQSxlQUFlLEVBQWZBLGVBWGU7QUFZZkUsRUFBQUEsV0FBVyxFQUFYQTtBQVplLENBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZm9ybWF0XG4gKiBAZmxvdyBzdHJpY3QtbG9jYWxcbiAqL1xuXG4vLyBUaGlzIGNsYXNzIGlzIHJlc3BvbnNpYmxlIGZvciBjb29yZGluYXRpbmcgdGhlIFwiZm9jdXNlZFwiIHN0YXRlIGZvclxuLy8gVGV4dElucHV0cy4gQWxsIGNhbGxzIHJlbGF0aW5nIHRvIHRoZSBrZXlib2FyZCBzaG91bGQgYmUgZnVubmVsZWRcbi8vIHRocm91Z2ggaGVyZS5cblxuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5jb25zdCBQbGF0Zm9ybSA9IHJlcXVpcmUoJy4uLy4uL1V0aWxpdGllcy9QbGF0Zm9ybScpO1xuY29uc3Qge2ZpbmROb2RlSGFuZGxlfSA9IHJlcXVpcmUoJy4uLy4uL1JlbmRlcmVyL3NoaW1zL1JlYWN0TmF0aXZlJyk7XG5pbXBvcnQge0NvbW1hbmRzIGFzIEFuZHJvaWRUZXh0SW5wdXRDb21tYW5kc30gZnJvbSAnLi4vLi4vQ29tcG9uZW50cy9UZXh0SW5wdXQvQW5kcm9pZFRleHRJbnB1dE5hdGl2ZUNvbXBvbmVudCc7XG5pbXBvcnQge0NvbW1hbmRzIGFzIGlPU1RleHRJbnB1dENvbW1hbmRzfSBmcm9tICcuLi8uLi9Db21wb25lbnRzL1RleHRJbnB1dC9SQ1RTaW5nZWxpbmVUZXh0SW5wdXROYXRpdmVDb21wb25lbnQnO1xuXG5pbXBvcnQgdHlwZSB7SG9zdENvbXBvbmVudH0gZnJvbSAnLi4vLi4vUmVuZGVyZXIvc2hpbXMvUmVhY3ROYXRpdmVUeXBlcyc7XG50eXBlIENvbXBvbmVudFJlZiA9IFJlYWN0LkVsZW1lbnRSZWY8SG9zdENvbXBvbmVudDxtaXhlZD4+O1xuXG5sZXQgY3VycmVudGx5Rm9jdXNlZElucHV0UmVmOiA/Q29tcG9uZW50UmVmID0gbnVsbDtcbmNvbnN0IGlucHV0cyA9IG5ldyBTZXQoKTtcblxuZnVuY3Rpb24gY3VycmVudGx5Rm9jdXNlZElucHV0KCk6ID9Db21wb25lbnRSZWYge1xuICByZXR1cm4gY3VycmVudGx5Rm9jdXNlZElucHV0UmVmO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIElEIG9mIHRoZSBjdXJyZW50bHkgZm9jdXNlZCB0ZXh0IGZpZWxkLCBpZiBvbmUgZXhpc3RzXG4gKiBJZiBubyB0ZXh0IGZpZWxkIGlzIGZvY3VzZWQgaXQgcmV0dXJucyBudWxsXG4gKi9cbmZ1bmN0aW9uIGN1cnJlbnRseUZvY3VzZWRGaWVsZCgpOiA/bnVtYmVyIHtcbiAgaWYgKF9fREVWX18pIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgJ2N1cnJlbnRseUZvY3VzZWRGaWVsZCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgcmVsZWFzZS4gVXNlIGN1cnJlbnRseUZvY3VzZWRJbnB1dCcsXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBmaW5kTm9kZUhhbmRsZShjdXJyZW50bHlGb2N1c2VkSW5wdXRSZWYpO1xufVxuXG5mdW5jdGlvbiBmb2N1c0lucHV0KHRleHRGaWVsZDogP0NvbXBvbmVudFJlZik6IHZvaWQge1xuICBpZiAoY3VycmVudGx5Rm9jdXNlZElucHV0UmVmICE9PSB0ZXh0RmllbGQgJiYgdGV4dEZpZWxkICE9IG51bGwpIHtcbiAgICBjdXJyZW50bHlGb2N1c2VkSW5wdXRSZWYgPSB0ZXh0RmllbGQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gYmx1cklucHV0KHRleHRGaWVsZDogP0NvbXBvbmVudFJlZik6IHZvaWQge1xuICBpZiAoY3VycmVudGx5Rm9jdXNlZElucHV0UmVmID09PSB0ZXh0RmllbGQgJiYgdGV4dEZpZWxkICE9IG51bGwpIHtcbiAgICBjdXJyZW50bHlGb2N1c2VkSW5wdXRSZWYgPSBudWxsO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZvY3VzRmllbGQodGV4dEZpZWxkSUQ6ID9udW1iZXIpOiB2b2lkIHtcbiAgaWYgKF9fREVWX18pIHtcbiAgICBjb25zb2xlLmVycm9yKCdmb2N1c0ZpZWxkIG5vIGxvbmdlciB3b3Jrcy4gVXNlIGZvY3VzSW5wdXQnKTtcbiAgfVxuXG4gIHJldHVybjtcbn1cblxuZnVuY3Rpb24gYmx1ckZpZWxkKHRleHRGaWVsZElEOiA/bnVtYmVyKSB7XG4gIGlmIChfX0RFVl9fKSB7XG4gICAgY29uc29sZS5lcnJvcignYmx1ckZpZWxkIG5vIGxvbmdlciB3b3Jrcy4gVXNlIGJsdXJJbnB1dCcpO1xuICB9XG5cbiAgcmV0dXJuO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBUZXh0SW5wdXRJRCBpZCBvZiB0aGUgdGV4dCBmaWVsZCB0byBmb2N1c1xuICogRm9jdXNlcyB0aGUgc3BlY2lmaWVkIHRleHQgZmllbGRcbiAqIG5vb3AgaWYgdGhlIHRleHQgZmllbGQgd2FzIGFscmVhZHkgZm9jdXNlZFxuICovXG5mdW5jdGlvbiBmb2N1c1RleHRJbnB1dCh0ZXh0RmllbGQ6ID9Db21wb25lbnRSZWYpIHtcbiAgaWYgKHR5cGVvZiB0ZXh0RmllbGQgPT09ICdudW1iZXInKSB7XG4gICAgaWYgKF9fREVWX18pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICdmb2N1c1RleHRJbnB1dCBtdXN0IGJlIGNhbGxlZCB3aXRoIGEgaG9zdCBjb21wb25lbnQuIFBhc3NpbmcgYSByZWFjdCB0YWcgaXMgZGVwcmVjYXRlZC4nLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoY3VycmVudGx5Rm9jdXNlZElucHV0UmVmICE9PSB0ZXh0RmllbGQgJiYgdGV4dEZpZWxkICE9IG51bGwpIHtcbiAgICBmb2N1c0lucHV0KHRleHRGaWVsZCk7XG4gICAgaWYgKFBsYXRmb3JtLk9TID09PSAnaW9zJykge1xuICAgICAgLy8gVGhpcyBpc24ndCBuZWNlc3NhcmlseSBhIHNpbmdsZSBsaW5lIHRleHQgaW5wdXRcbiAgICAgIC8vIEJ1dCBjb21tYW5kcyBkb24ndCBhY3R1YWxseSBjYXJlIGFzIGxvbmcgYXMgdGhlIHRoaW5nIGJlaW5nIHBhc3NlZCBpblxuICAgICAgLy8gYWN0dWFsbHkgaGFzIGEgY29tbWFuZCB3aXRoIHRoYXQgbmFtZS4gU28gdGhpcyBzaG91bGQgd29yayB3aXRoIHNpbmdsZVxuICAgICAgLy8gYW5kIG11bHRpbGluZSB0ZXh0IGlucHV0cy4gSWRlYWxseSB3ZSdsbCBtZXJnZSB0aGVtIGludG8gb25lIGNvbXBvbmVudFxuICAgICAgLy8gaW4gdGhlIGZ1dHVyZS5cbiAgICAgIGlPU1RleHRJbnB1dENvbW1hbmRzLmZvY3VzKHRleHRGaWVsZCk7XG4gICAgfSBlbHNlIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnKSB7XG4gICAgICBBbmRyb2lkVGV4dElucHV0Q29tbWFuZHMuZm9jdXModGV4dEZpZWxkKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gdGV4dEZpZWxkSUQgaWQgb2YgdGhlIHRleHQgZmllbGQgdG8gdW5mb2N1c1xuICogVW5mb2N1c2VzIHRoZSBzcGVjaWZpZWQgdGV4dCBmaWVsZFxuICogbm9vcCBpZiBpdCB3YXNuJ3QgZm9jdXNlZFxuICovXG5mdW5jdGlvbiBibHVyVGV4dElucHV0KHRleHRGaWVsZDogP0NvbXBvbmVudFJlZikge1xuICBpZiAodHlwZW9mIHRleHRGaWVsZCA9PT0gJ251bWJlcicpIHtcbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgJ2ZvY3VzVGV4dElucHV0IG11c3QgYmUgY2FsbGVkIHdpdGggYSBob3N0IGNvbXBvbmVudC4gUGFzc2luZyBhIHJlYWN0IHRhZyBpcyBkZXByZWNhdGVkLicsXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChjdXJyZW50bHlGb2N1c2VkSW5wdXRSZWYgPT09IHRleHRGaWVsZCAmJiB0ZXh0RmllbGQgIT0gbnVsbCkge1xuICAgIGJsdXJJbnB1dCh0ZXh0RmllbGQpO1xuICAgIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2lvcycpIHtcbiAgICAgIC8vIFRoaXMgaXNuJ3QgbmVjZXNzYXJpbHkgYSBzaW5nbGUgbGluZSB0ZXh0IGlucHV0XG4gICAgICAvLyBCdXQgY29tbWFuZHMgZG9uJ3QgYWN0dWFsbHkgY2FyZSBhcyBsb25nIGFzIHRoZSB0aGluZyBiZWluZyBwYXNzZWQgaW5cbiAgICAgIC8vIGFjdHVhbGx5IGhhcyBhIGNvbW1hbmQgd2l0aCB0aGF0IG5hbWUuIFNvIHRoaXMgc2hvdWxkIHdvcmsgd2l0aCBzaW5nbGVcbiAgICAgIC8vIGFuZCBtdWx0aWxpbmUgdGV4dCBpbnB1dHMuIElkZWFsbHkgd2UnbGwgbWVyZ2UgdGhlbSBpbnRvIG9uZSBjb21wb25lbnRcbiAgICAgIC8vIGluIHRoZSBmdXR1cmUuXG4gICAgICBpT1NUZXh0SW5wdXRDb21tYW5kcy5ibHVyKHRleHRGaWVsZCk7XG4gICAgfSBlbHNlIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnKSB7XG4gICAgICBBbmRyb2lkVGV4dElucHV0Q29tbWFuZHMuYmx1cih0ZXh0RmllbGQpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiByZWdpc3RlcklucHV0KHRleHRGaWVsZDogQ29tcG9uZW50UmVmKSB7XG4gIGlmICh0eXBlb2YgdGV4dEZpZWxkID09PSAnbnVtYmVyJykge1xuICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAncmVnaXN0ZXJJbnB1dCBtdXN0IGJlIGNhbGxlZCB3aXRoIGEgaG9zdCBjb21wb25lbnQuIFBhc3NpbmcgYSByZWFjdCB0YWcgaXMgZGVwcmVjYXRlZC4nLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm47XG4gIH1cblxuICBpbnB1dHMuYWRkKHRleHRGaWVsZCk7XG59XG5cbmZ1bmN0aW9uIHVucmVnaXN0ZXJJbnB1dCh0ZXh0RmllbGQ6IENvbXBvbmVudFJlZikge1xuICBpZiAodHlwZW9mIHRleHRGaWVsZCA9PT0gJ251bWJlcicpIHtcbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgJ3VucmVnaXN0ZXJJbnB1dCBtdXN0IGJlIGNhbGxlZCB3aXRoIGEgaG9zdCBjb21wb25lbnQuIFBhc3NpbmcgYSByZWFjdCB0YWcgaXMgZGVwcmVjYXRlZC4nLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm47XG4gIH1cbiAgaW5wdXRzLmRlbGV0ZSh0ZXh0RmllbGQpO1xufVxuXG5mdW5jdGlvbiBpc1RleHRJbnB1dCh0ZXh0RmllbGQ6IENvbXBvbmVudFJlZik6IGJvb2xlYW4ge1xuICBpZiAodHlwZW9mIHRleHRGaWVsZCA9PT0gJ251bWJlcicpIHtcbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgJ2lzVGV4dElucHV0IG11c3QgYmUgY2FsbGVkIHdpdGggYSBob3N0IGNvbXBvbmVudC4gUGFzc2luZyBhIHJlYWN0IHRhZyBpcyBkZXByZWNhdGVkLicsXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBpbnB1dHMuaGFzKHRleHRGaWVsZCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjdXJyZW50bHlGb2N1c2VkSW5wdXQsXG4gIGZvY3VzSW5wdXQsXG4gIGJsdXJJbnB1dCxcblxuICBjdXJyZW50bHlGb2N1c2VkRmllbGQsXG4gIGZvY3VzRmllbGQsXG4gIGJsdXJGaWVsZCxcbiAgZm9jdXNUZXh0SW5wdXQsXG4gIGJsdXJUZXh0SW5wdXQsXG4gIHJlZ2lzdGVySW5wdXQsXG4gIHVucmVnaXN0ZXJJbnB1dCxcbiAgaXNUZXh0SW5wdXQsXG59O1xuIl19