705adf757aeb6cc611dd7cea8cd61fe6
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var DeprecatedTextInputPropTypes = require("../../DeprecatedPropTypes/DeprecatedTextInputPropTypes");

var Platform = require("../../Utilities/Platform");

var React = require('react');

var ReactNative = require("../../Renderer/shims/ReactNative");

var StyleSheet = require("../../StyleSheet/StyleSheet");

var Text = require("../../Text/Text");

var TextAncestor = require("../../Text/TextAncestor");

var TextInputState = require("./TextInputState");

var TouchableWithoutFeedback = require("../Touchable/TouchableWithoutFeedback");

var invariant = require('invariant');

var nullthrows = require('nullthrows');

var setAndForwardRef = require("../../Utilities/setAndForwardRef");

var useEffect = React.useEffect,
    useRef = React.useRef,
    useState = React.useState;
var AndroidTextInput;
var AndroidTextInputCommands;
var RCTSinglelineTextInputView;
var RCTSinglelineTextInputNativeCommands;
var RCTMultilineTextInputView;
var RCTMultilineTextInputNativeCommands;

if (Platform.OS === 'android') {
  AndroidTextInput = require("./AndroidTextInputNativeComponent").default;
  AndroidTextInputCommands = require("./AndroidTextInputNativeComponent").Commands;
} else if (Platform.OS === 'ios') {
  RCTSinglelineTextInputView = require("./RCTSingelineTextInputNativeComponent").default;
  RCTSinglelineTextInputNativeCommands = require("./RCTSingelineTextInputNativeComponent").Commands;
  RCTMultilineTextInputView = require("./RCTMultilineTextInputNativeComponent").default;
  RCTMultilineTextInputNativeCommands = require("./RCTMultilineTextInputNativeComponent").Commands;
}

var emptyFunctionThatReturnsTrue = function emptyFunctionThatReturnsTrue() {
  return true;
};

function InternalTextInput(props) {
  var _props$selection$end;

  var inputRef = useRef(null);
  var selection = props.selection == null ? null : {
    start: props.selection.start,
    end: (_props$selection$end = props.selection.end) != null ? _props$selection$end : props.selection.start
  };

  var _useState = useState(0),
      _useState2 = (0, _slicedToArray2.default)(_useState, 2),
      mostRecentEventCount = _useState2[0],
      setMostRecentEventCount = _useState2[1];

  var _useState3 = useState(props.value),
      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),
      lastNativeText = _useState4[0],
      setLastNativeText = _useState4[1];

  var _useState5 = useState({
    selection: selection,
    mostRecentEventCount: mostRecentEventCount
  }),
      _useState6 = (0, _slicedToArray2.default)(_useState5, 2),
      lastNativeSelectionState = _useState6[0],
      setLastNativeSelection = _useState6[1];

  var lastNativeSelection = lastNativeSelectionState.selection;
  var lastNativeSelectionEventCount = lastNativeSelectionState.mostRecentEventCount;

  if (lastNativeSelectionEventCount < mostRecentEventCount) {
    selection = null;
  }

  var viewCommands;

  if (AndroidTextInputCommands) {
    viewCommands = AndroidTextInputCommands;
  } else {
    viewCommands = props.multiline ? RCTMultilineTextInputNativeCommands : RCTSinglelineTextInputNativeCommands;
  }

  var text = typeof props.value === 'string' ? props.value : typeof props.defaultValue === 'string' ? props.defaultValue : '';
  useEffect(function () {
    var nativeUpdate = {};

    if (lastNativeText !== props.value && typeof props.value === 'string') {
      nativeUpdate.text = props.value;
      setLastNativeText(props.value);
    }

    if (selection && lastNativeSelection && (lastNativeSelection.start !== selection.start || lastNativeSelection.end !== selection.end)) {
      nativeUpdate.selection = selection;
      setLastNativeSelection({
        selection: selection,
        mostRecentEventCount: mostRecentEventCount
      });
    }

    if (Object.keys(nativeUpdate).length === 0) {
      return;
    }

    if (inputRef.current != null) {
      var _selection$start, _selection, _selection$end, _selection2;

      viewCommands.setTextAndSelection(inputRef.current, mostRecentEventCount, text, (_selection$start = (_selection = selection) == null ? void 0 : _selection.start) != null ? _selection$start : -1, (_selection$end = (_selection2 = selection) == null ? void 0 : _selection2.end) != null ? _selection$end : -1);
    }
  }, [mostRecentEventCount, inputRef, props.value, props.defaultValue, lastNativeText, selection, lastNativeSelection, text, viewCommands]);
  useEffect(function () {
    var inputRefValue = inputRef.current;

    if (inputRefValue != null) {
      TextInputState.registerInput(inputRefValue);
      return function () {
        TextInputState.unregisterInput(inputRefValue);
      };
    }
  }, [inputRef]);
  useEffect(function () {
    return function () {
      if (isFocused()) {
        nullthrows(inputRef.current).blur();
      }
    };
  }, [inputRef]);

  function clear() {
    if (inputRef.current != null) {
      viewCommands.setTextAndSelection(inputRef.current, mostRecentEventCount, '', 0, 0);
    }
  }

  function isFocused() {
    return TextInputState.currentlyFocusedInput() === inputRef.current;
  }

  function getNativeRef() {
    return inputRef.current;
  }

  var _setNativeRef = setAndForwardRef({
    getForwardedRef: function getForwardedRef() {
      return props.forwardedRef;
    },
    setLocalRef: function setLocalRef(ref) {
      inputRef.current = ref;

      if (ref) {
        ref.clear = clear;
        ref.isFocused = isFocused;
        ref.getNativeRef = getNativeRef;
      }
    }
  });

  var _onPress = function _onPress(event) {
    if (props.editable || props.editable === undefined) {
      nullthrows(inputRef.current).focus();
    }
  };

  var _onChange = function _onChange(event) {
    var text = event.nativeEvent.text;
    props.onChange && props.onChange(event);
    props.onChangeText && props.onChangeText(text);

    if (inputRef.current == null) {
      return;
    }

    setLastNativeText(text);
    setMostRecentEventCount(event.nativeEvent.eventCount);
  };

  var _onSelectionChange = function _onSelectionChange(event) {
    props.onSelectionChange && props.onSelectionChange(event);

    if (inputRef.current == null) {
      return;
    }

    setLastNativeSelection({
      selection: event.nativeEvent.selection,
      mostRecentEventCount: mostRecentEventCount
    });
  };

  var _onFocus = function _onFocus(event) {
    TextInputState.focusInput(inputRef.current);

    if (props.onFocus) {
      props.onFocus(event);
    }
  };

  var _onBlur = function _onBlur(event) {
    TextInputState.blurInput(inputRef.current);

    if (props.onBlur) {
      props.onBlur(event);
    }
  };

  var _onScroll = function _onScroll(event) {
    props.onScroll && props.onScroll(event);
  };

  var textInput = null;

  var additionalTouchableProps = _objectSpread({}, null);

  if (Platform.OS === 'ios') {
    var RCTTextInputView = props.multiline ? RCTMultilineTextInputView : RCTSinglelineTextInputView;
    var style = props.multiline ? [styles.multilineInput, props.style] : props.style;
    additionalTouchableProps.rejectResponderTermination = props.rejectResponderTermination;
    textInput = React.createElement(RCTTextInputView, (0, _extends2.default)({
      ref: _setNativeRef
    }, props, {
      dataDetectorTypes: props.dataDetectorTypes,
      mostRecentEventCount: mostRecentEventCount,
      onBlur: _onBlur,
      onChange: _onChange,
      onContentSizeChange: props.onContentSizeChange,
      onFocus: _onFocus,
      onScroll: _onScroll,
      onSelectionChange: _onSelectionChange,
      onSelectionChangeShouldSetResponder: emptyFunctionThatReturnsTrue,
      selection: selection,
      style: style,
      text: text
    }));
  } else if (Platform.OS === 'android') {
    var _style = [props.style];
    var autoCapitalize = props.autoCapitalize || 'sentences';
    var children = props.children;
    var childCount = 0;
    React.Children.forEach(children, function () {
      return ++childCount;
    });
    invariant(!(props.value && childCount), 'Cannot specify both value and children.');

    if (childCount > 1) {
      children = React.createElement(Text, null, children);
    }

    textInput = React.createElement(AndroidTextInput, (0, _extends2.default)({
      ref: _setNativeRef
    }, props, {
      autoCapitalize: autoCapitalize,
      children: children,
      disableFullscreenUI: props.disableFullscreenUI,
      mostRecentEventCount: mostRecentEventCount,
      onBlur: _onBlur,
      onChange: _onChange,
      onFocus: _onFocus,
      onScroll: _onScroll,
      onSelectionChange: _onSelectionChange,
      selection: selection,
      style: _style,
      text: text,
      textBreakStrategy: props.textBreakStrategy
    }));
  }

  return React.createElement(TextAncestor.Provider, {
    value: true
  }, React.createElement(TouchableWithoutFeedback, (0, _extends2.default)({
    onLayout: props.onLayout,
    onPress: _onPress,
    accessible: props.accessible,
    accessibilityLabel: props.accessibilityLabel,
    accessibilityRole: props.accessibilityRole,
    accessibilityState: props.accessibilityState,
    nativeID: props.nativeID,
    testID: props.testID
  }, additionalTouchableProps), textInput));
}

var ExportedForwardRef = React.forwardRef(function TextInput(props, forwardedRef) {
  return React.createElement(InternalTextInput, (0, _extends2.default)({}, props, {
    forwardedRef: forwardedRef
  }));
});
ExportedForwardRef.defaultProps = {
  allowFontScaling: true,
  rejectResponderTermination: true,
  underlineColorAndroid: 'transparent'
};
ExportedForwardRef.propTypes = DeprecatedTextInputPropTypes;
ExportedForwardRef.State = {
  currentlyFocusedInput: TextInputState.currentlyFocusedInput,
  currentlyFocusedField: TextInputState.currentlyFocusedField,
  focusTextInput: TextInputState.focusTextInput,
  blurTextInput: TextInputState.blurTextInput
};
var styles = StyleSheet.create({
  multilineInput: {
    paddingTop: 5
  }
});
module.exports = ExportedForwardRef;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRleHRJbnB1dC5qcyJdLCJuYW1lcyI6WyJEZXByZWNhdGVkVGV4dElucHV0UHJvcFR5cGVzIiwicmVxdWlyZSIsIlBsYXRmb3JtIiwiUmVhY3QiLCJSZWFjdE5hdGl2ZSIsIlN0eWxlU2hlZXQiLCJUZXh0IiwiVGV4dEFuY2VzdG9yIiwiVGV4dElucHV0U3RhdGUiLCJUb3VjaGFibGVXaXRob3V0RmVlZGJhY2siLCJpbnZhcmlhbnQiLCJudWxsdGhyb3dzIiwic2V0QW5kRm9yd2FyZFJlZiIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwiQW5kcm9pZFRleHRJbnB1dCIsIkFuZHJvaWRUZXh0SW5wdXRDb21tYW5kcyIsIlJDVFNpbmdsZWxpbmVUZXh0SW5wdXRWaWV3IiwiUkNUU2luZ2xlbGluZVRleHRJbnB1dE5hdGl2ZUNvbW1hbmRzIiwiUkNUTXVsdGlsaW5lVGV4dElucHV0VmlldyIsIlJDVE11bHRpbGluZVRleHRJbnB1dE5hdGl2ZUNvbW1hbmRzIiwiT1MiLCJkZWZhdWx0IiwiQ29tbWFuZHMiLCJlbXB0eUZ1bmN0aW9uVGhhdFJldHVybnNUcnVlIiwiSW50ZXJuYWxUZXh0SW5wdXQiLCJwcm9wcyIsImlucHV0UmVmIiwic2VsZWN0aW9uIiwic3RhcnQiLCJlbmQiLCJtb3N0UmVjZW50RXZlbnRDb3VudCIsInNldE1vc3RSZWNlbnRFdmVudENvdW50IiwidmFsdWUiLCJsYXN0TmF0aXZlVGV4dCIsInNldExhc3ROYXRpdmVUZXh0IiwibGFzdE5hdGl2ZVNlbGVjdGlvblN0YXRlIiwic2V0TGFzdE5hdGl2ZVNlbGVjdGlvbiIsImxhc3ROYXRpdmVTZWxlY3Rpb24iLCJsYXN0TmF0aXZlU2VsZWN0aW9uRXZlbnRDb3VudCIsInZpZXdDb21tYW5kcyIsIm11bHRpbGluZSIsInRleHQiLCJkZWZhdWx0VmFsdWUiLCJuYXRpdmVVcGRhdGUiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwiY3VycmVudCIsInNldFRleHRBbmRTZWxlY3Rpb24iLCJpbnB1dFJlZlZhbHVlIiwicmVnaXN0ZXJJbnB1dCIsInVucmVnaXN0ZXJJbnB1dCIsImlzRm9jdXNlZCIsImJsdXIiLCJjbGVhciIsImN1cnJlbnRseUZvY3VzZWRJbnB1dCIsImdldE5hdGl2ZVJlZiIsIl9zZXROYXRpdmVSZWYiLCJnZXRGb3J3YXJkZWRSZWYiLCJmb3J3YXJkZWRSZWYiLCJzZXRMb2NhbFJlZiIsInJlZiIsIl9vblByZXNzIiwiZXZlbnQiLCJlZGl0YWJsZSIsInVuZGVmaW5lZCIsImZvY3VzIiwiX29uQ2hhbmdlIiwibmF0aXZlRXZlbnQiLCJvbkNoYW5nZSIsIm9uQ2hhbmdlVGV4dCIsImV2ZW50Q291bnQiLCJfb25TZWxlY3Rpb25DaGFuZ2UiLCJvblNlbGVjdGlvbkNoYW5nZSIsIl9vbkZvY3VzIiwiZm9jdXNJbnB1dCIsIm9uRm9jdXMiLCJfb25CbHVyIiwiYmx1cklucHV0Iiwib25CbHVyIiwiX29uU2Nyb2xsIiwib25TY3JvbGwiLCJ0ZXh0SW5wdXQiLCJhZGRpdGlvbmFsVG91Y2hhYmxlUHJvcHMiLCJSQ1RUZXh0SW5wdXRWaWV3Iiwic3R5bGUiLCJzdHlsZXMiLCJtdWx0aWxpbmVJbnB1dCIsInJlamVjdFJlc3BvbmRlclRlcm1pbmF0aW9uIiwiZGF0YURldGVjdG9yVHlwZXMiLCJvbkNvbnRlbnRTaXplQ2hhbmdlIiwiYXV0b0NhcGl0YWxpemUiLCJjaGlsZHJlbiIsImNoaWxkQ291bnQiLCJDaGlsZHJlbiIsImZvckVhY2giLCJkaXNhYmxlRnVsbHNjcmVlblVJIiwidGV4dEJyZWFrU3RyYXRlZ3kiLCJvbkxheW91dCIsImFjY2Vzc2libGUiLCJhY2Nlc3NpYmlsaXR5TGFiZWwiLCJhY2Nlc3NpYmlsaXR5Um9sZSIsImFjY2Vzc2liaWxpdHlTdGF0ZSIsIm5hdGl2ZUlEIiwidGVzdElEIiwiRXhwb3J0ZWRGb3J3YXJkUmVmIiwiZm9yd2FyZFJlZiIsIlRleHRJbnB1dCIsImRlZmF1bHRQcm9wcyIsImFsbG93Rm9udFNjYWxpbmciLCJ1bmRlcmxpbmVDb2xvckFuZHJvaWQiLCJwcm9wVHlwZXMiLCJTdGF0ZSIsImN1cnJlbnRseUZvY3VzZWRGaWVsZCIsImZvY3VzVGV4dElucHV0IiwiYmx1clRleHRJbnB1dCIsImNyZWF0ZSIsInBhZGRpbmdUb3AiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFVQTs7Ozs7Ozs7Ozs7Ozs7QUFFQSxJQUFNQSw0QkFBNEIsR0FBR0MsT0FBTywwREFBNUM7O0FBQ0EsSUFBTUMsUUFBUSxHQUFHRCxPQUFPLDRCQUF4Qjs7QUFDQSxJQUFNRSxLQUFLLEdBQUdGLE9BQU8sQ0FBQyxPQUFELENBQXJCOztBQUNBLElBQU1HLFdBQVcsR0FBR0gsT0FBTyxvQ0FBM0I7O0FBQ0EsSUFBTUksVUFBVSxHQUFHSixPQUFPLCtCQUExQjs7QUFDQSxJQUFNSyxJQUFJLEdBQUdMLE9BQU8sbUJBQXBCOztBQUNBLElBQU1NLFlBQVksR0FBR04sT0FBTywyQkFBNUI7O0FBQ0EsSUFBTU8sY0FBYyxHQUFHUCxPQUFPLG9CQUE5Qjs7QUFDQSxJQUFNUSx3QkFBd0IsR0FBR1IsT0FBTyx5Q0FBeEM7O0FBRUEsSUFBTVMsU0FBUyxHQUFHVCxPQUFPLENBQUMsV0FBRCxDQUF6Qjs7QUFDQSxJQUFNVSxVQUFVLEdBQUdWLE9BQU8sQ0FBQyxZQUFELENBQTFCOztBQUNBLElBQU1XLGdCQUFnQixHQUFHWCxPQUFPLG9DQUFoQzs7SUFVT1ksUyxHQUErQlYsSyxDQUEvQlUsUztJQUFXQyxNLEdBQW9CWCxLLENBQXBCVyxNO0lBQVFDLFEsR0FBWVosSyxDQUFaWSxRO0FBSTFCLElBQUlDLGdCQUFKO0FBQ0EsSUFBSUMsd0JBQUo7QUFDQSxJQUFJQywwQkFBSjtBQUNBLElBQUlDLG9DQUFKO0FBQ0EsSUFBSUMseUJBQUo7QUFDQSxJQUFJQyxtQ0FBSjs7QUFFQSxJQUFJbkIsUUFBUSxDQUFDb0IsRUFBVCxLQUFnQixTQUFwQixFQUErQjtBQUM3Qk4sRUFBQUEsZ0JBQWdCLEdBQUdmLE9BQU8scUNBQVAsQ0FBNkNzQixPQUFoRTtBQUNBTixFQUFBQSx3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TSxFQUFFOUUsS0FBSyxDQUFDK0U7QUFSaEIsS0FTTXJCLHdCQVROLEdBVUdELFNBVkgsQ0FERixDQURGO0FBZ0JEOztBQUVELElBQU11QixrQkFHTCxHQUFHeEcsS0FBSyxDQUFDeUcsVUFBTixDQUFpQixTQUFTQyxTQUFULENBQ25CbEYsS0FEbUIsRUFFbkJrQyxZQUZtQixFQUtuQjtBQUNBLFNBQU8sb0JBQUMsaUJBQUQsNkJBQXVCbEMsS0FBdkI7QUFBOEIsSUFBQSxZQUFZLEVBQUVrQztBQUE1QyxLQUFQO0FBQ0QsQ0FQRyxDQUhKO0FBYUE4QyxrQkFBa0IsQ0FBQ0csWUFBbkIsR0FBa0M7QUFDaENDLEVBQUFBLGdCQUFnQixFQUFFLElBRGM7QUFFaENyQixFQUFBQSwwQkFBMEIsRUFBRSxJQUZJO0FBR2hDc0IsRUFBQUEscUJBQXFCLEVBQUU7QUFIUyxDQUFsQztBQVFBTCxrQkFBa0IsQ0FBQ00sU0FBbkIsR0FBK0JqSCw0QkFBL0I7QUFHQTJHLGtCQUFrQixDQUFDTyxLQUFuQixHQUEyQjtBQUN6QnpELEVBQUFBLHFCQUFxQixFQUFFakQsY0FBYyxDQUFDaUQscUJBRGI7QUFHekIwRCxFQUFBQSxxQkFBcUIsRUFBRTNHLGNBQWMsQ0FBQzJHLHFCQUhiO0FBSXpCQyxFQUFBQSxjQUFjLEVBQUU1RyxjQUFjLENBQUM0RyxjQUpOO0FBS3pCQyxFQUFBQSxhQUFhLEVBQUU3RyxjQUFjLENBQUM2RztBQUxMLENBQTNCO0FBa0JBLElBQU03QixNQUFNLEdBQUduRixVQUFVLENBQUNpSCxNQUFYLENBQWtCO0FBQy9CN0IsRUFBQUEsY0FBYyxFQUFFO0FBSWQ4QixJQUFBQSxVQUFVLEVBQUU7QUFKRTtBQURlLENBQWxCLENBQWY7QUFTQUMsTUFBTSxDQUFDQyxPQUFQLEdBQW1CZCxrQkFBbkIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBEZXByZWNhdGVkVGV4dElucHV0UHJvcFR5cGVzID0gcmVxdWlyZSgnLi4vLi4vRGVwcmVjYXRlZFByb3BUeXBlcy9EZXByZWNhdGVkVGV4dElucHV0UHJvcFR5cGVzJyk7XG5jb25zdCBQbGF0Zm9ybSA9IHJlcXVpcmUoJy4uLy4uL1V0aWxpdGllcy9QbGF0Zm9ybScpO1xuY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuY29uc3QgUmVhY3ROYXRpdmUgPSByZXF1aXJlKCcuLi8uLi9SZW5kZXJlci9zaGltcy9SZWFjdE5hdGl2ZScpO1xuY29uc3QgU3R5bGVTaGVldCA9IHJlcXVpcmUoJy4uLy4uL1N0eWxlU2hlZXQvU3R5bGVTaGVldCcpO1xuY29uc3QgVGV4dCA9IHJlcXVpcmUoJy4uLy4uL1RleHQvVGV4dCcpO1xuY29uc3QgVGV4dEFuY2VzdG9yID0gcmVxdWlyZSgnLi4vLi4vVGV4dC9UZXh0QW5jZXN0b3InKTtcbmNvbnN0IFRleHRJbnB1dFN0YXRlID0gcmVxdWlyZSgnLi9UZXh0SW5wdXRTdGF0ZScpO1xuY29uc3QgVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrID0gcmVxdWlyZSgnLi4vVG91Y2hhYmxlL1RvdWNoYWJsZVdpdGhvdXRGZWVkYmFjaycpO1xuXG5jb25zdCBpbnZhcmlhbnQgPSByZXF1aXJlKCdpbnZhcmlhbnQnKTtcbmNvbnN0IG51bGx0aHJvd3MgPSByZXF1aXJlKCdudWxsdGhyb3dzJyk7XG5jb25zdCBzZXRBbmRGb3J3YXJkUmVmID0gcmVxdWlyZSgnLi4vLi4vVXRpbGl0aWVzL3NldEFuZEZvcndhcmRSZWYnKTtcblxuaW1wb3J0IHR5cGUge1RleHRTdHlsZVByb3AsIFZpZXdTdHlsZVByb3B9IGZyb20gJy4uLy4uL1N0eWxlU2hlZXQvU3R5bGVTaGVldCc7XG5pbXBvcnQgdHlwZSB7Q29sb3JWYWx1ZX0gZnJvbSAnLi4vLi4vU3R5bGVTaGVldC9TdHlsZVNoZWV0VHlwZXMnO1xuaW1wb3J0IHR5cGUge1ZpZXdQcm9wc30gZnJvbSAnLi4vVmlldy9WaWV3UHJvcFR5cGVzJztcbmltcG9ydCB0eXBlIHtTeW50aGV0aWNFdmVudCwgU2Nyb2xsRXZlbnR9IGZyb20gJy4uLy4uL1R5cGVzL0NvcmVFdmVudFR5cGVzJztcbmltcG9ydCB0eXBlIHtQcmVzc0V2ZW50fSBmcm9tICcuLi8uLi9UeXBlcy9Db3JlRXZlbnRUeXBlcyc7XG5pbXBvcnQgdHlwZSB7SG9zdENvbXBvbmVudH0gZnJvbSAnLi4vLi4vUmVuZGVyZXIvc2hpbXMvUmVhY3ROYXRpdmVUeXBlcyc7XG5pbXBvcnQgdHlwZSB7VGV4dElucHV0TmF0aXZlQ29tbWFuZHN9IGZyb20gJy4vVGV4dElucHV0TmF0aXZlQ29tbWFuZHMnO1xuXG5jb25zdCB7dXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlfSA9IFJlYWN0O1xuXG50eXBlIFJlYWN0UmVmU2V0dGVyPFQ+ID0ge2N1cnJlbnQ6IG51bGwgfCBULCAuLi59IHwgKChyZWY6IG51bGwgfCBUKSA9PiBtaXhlZCk7XG5cbmxldCBBbmRyb2lkVGV4dElucHV0O1xubGV0IEFuZHJvaWRUZXh0SW5wdXRDb21tYW5kcztcbmxldCBSQ1RTaW5nbGVsaW5lVGV4dElucHV0VmlldztcbmxldCBSQ1RTaW5nbGVsaW5lVGV4dElucHV0TmF0aXZlQ29tbWFuZHM7XG5sZXQgUkNUTXVsdGlsaW5lVGV4dElucHV0VmlldztcbmxldCBSQ1RNdWx0aWxpbmVUZXh0SW5wdXROYXRpdmVDb21tYW5kcztcblxuaWYgKFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCcpIHtcbiAgQW5kcm9pZFRleHRJbnB1dCA9IHJlcXVpcmUoJy4vQW5kcm9pZFRleHRJbnB1dE5hdGl2ZUNvbXBvbmVudCcpLmRlZmF1bHQ7XG4gIEFuZHJvaWRUZXh0SW5wdXRDb21tYW5kcyA9IHJlcXVpcmUoJy4vQW5kcm9pZFRleHRJbnB1dE5hdGl2ZUNvbXBvbmVudCcpXG4gICAgLkNvbW1hbmRzO1xufSBlbHNlIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2lvcycpIHtcbiAgUkNUU2luZ2xlbGluZVRleHRJbnB1dFZpZXcgPSByZXF1aXJlKCcuL1JDVFNpbmdlbGluZVRleHRJbnB1dE5hdGl2ZUNvbXBvbmVudCcpXG4gICAgLmRlZmF1bHQ7XG4gIFJDVFNpbmdsZWxpbmVUZXh0SW5wdXROYXRpdmVDb21tYW5kcyA9IHJlcXVpcmUoJy4vUkNUU2luZ2VsaW5lVGV4dElucHV0TmF0aXZlQ29tcG9uZW50JylcbiAgICAuQ29tbWFuZHM7XG4gIFJDVE11bHRpbGluZVRleHRJbnB1dFZpZXcgPSByZXF1aXJlKCcuL1JDVE11bHRpbGluZVRleHRJbnB1dE5hdGl2ZUNvbXBvbmVudCcpXG4gICAgLmRlZmF1bHQ7XG4gIFJDVE11bHRpbGluZVRleHRJbnB1dE5hdGl2ZUNvbW1hbmRzID0gcmVxdWlyZSgnLi9SQ1RNdWx0aWxpbmVUZXh0SW5wdXROYXRpdmVDb21wb25lbnQnKVxuICAgIC5Db21tYW5kcztcbn1cblxuZXhwb3J0IHR5cGUgQ2hhbmdlRXZlbnQgPSBTeW50aGV0aWNFdmVudDxcbiAgJFJlYWRPbmx5PHt8XG4gICAgZXZlbnRDb3VudDogbnVtYmVyLFxuICAgIHRhcmdldDogbnVtYmVyLFxuICAgIHRleHQ6IHN0cmluZyxcbiAgfH0+LFxuPjtcblxuZXhwb3J0IHR5cGUgVGV4dElucHV0RXZlbnQgPSBTeW50aGV0aWNFdmVudDxcbiAgJFJlYWRPbmx5PHt8XG4gICAgZXZlbnRDb3VudDogbnVtYmVyLFxuICAgIHByZXZpb3VzVGV4dDogc3RyaW5nLFxuICAgIHJhbmdlOiAkUmVhZE9ubHk8e3xcbiAgICAgIHN0YXJ0OiBudW1iZXIsXG4gICAgICBlbmQ6IG51bWJlcixcbiAgICB8fT4sXG4gICAgdGFyZ2V0OiBudW1iZXIsXG4gICAgdGV4dDogc3RyaW5nLFxuICB8fT4sXG4+O1xuXG5leHBvcnQgdHlwZSBDb250ZW50U2l6ZUNoYW5nZUV2ZW50ID0gU3ludGhldGljRXZlbnQ8XG4gICRSZWFkT25seTx7fFxuICAgIHRhcmdldDogbnVtYmVyLFxuICAgIGNvbnRlbnRTaXplOiAkUmVhZE9ubHk8e3xcbiAgICAgIHdpZHRoOiBudW1iZXIsXG4gICAgICBoZWlnaHQ6IG51bWJlcixcbiAgICB8fT4sXG4gIHx9Pixcbj47XG5cbnR5cGUgVGFyZ2V0RXZlbnQgPSBTeW50aGV0aWNFdmVudDxcbiAgJFJlYWRPbmx5PHt8XG4gICAgdGFyZ2V0OiBudW1iZXIsXG4gIHx9Pixcbj47XG5cbmV4cG9ydCB0eXBlIEJsdXJFdmVudCA9IFRhcmdldEV2ZW50O1xuZXhwb3J0IHR5cGUgRm9jdXNFdmVudCA9IFRhcmdldEV2ZW50O1xuXG50eXBlIFNlbGVjdGlvbiA9ICRSZWFkT25seTx7fFxuICBzdGFydDogbnVtYmVyLFxuICBlbmQ6IG51bWJlcixcbnx9PjtcblxuZXhwb3J0IHR5cGUgU2VsZWN0aW9uQ2hhbmdlRXZlbnQgPSBTeW50aGV0aWNFdmVudDxcbiAgJFJlYWRPbmx5PHt8XG4gICAgc2VsZWN0aW9uOiBTZWxlY3Rpb24sXG4gICAgdGFyZ2V0OiBudW1iZXIsXG4gIHx9Pixcbj47XG5cbmV4cG9ydCB0eXBlIEtleVByZXNzRXZlbnQgPSBTeW50aGV0aWNFdmVudDxcbiAgJFJlYWRPbmx5PHt8XG4gICAga2V5OiBzdHJpbmcsXG4gICAgdGFyZ2V0PzogP251bWJlcixcbiAgICBldmVudENvdW50PzogP251bWJlcixcbiAgfH0+LFxuPjtcblxuZXhwb3J0IHR5cGUgRWRpdGluZ0V2ZW50ID0gU3ludGhldGljRXZlbnQ8XG4gICRSZWFkT25seTx7fFxuICAgIGV2ZW50Q291bnQ6IG51bWJlcixcbiAgICB0ZXh0OiBzdHJpbmcsXG4gICAgdGFyZ2V0OiBudW1iZXIsXG4gIHx9Pixcbj47XG5cbnR5cGUgRGF0YURldGVjdG9yVHlwZXNUeXBlID1cbiAgfCAncGhvbmVOdW1iZXInXG4gIHwgJ2xpbmsnXG4gIHwgJ2FkZHJlc3MnXG4gIHwgJ2NhbGVuZGFyRXZlbnQnXG4gIHwgJ25vbmUnXG4gIHwgJ2FsbCc7XG5cbmV4cG9ydCB0eXBlIEtleWJvYXJkVHlwZSA9XG4gIC8vIENyb3NzIFBsYXRmb3JtXG4gIHwgJ2RlZmF1bHQnXG4gIHwgJ2VtYWlsLWFkZHJlc3MnXG4gIHwgJ251bWVyaWMnXG4gIHwgJ3Bob25lLXBhZCdcbiAgfCAnbnVtYmVyLXBhZCdcbiAgfCAnZGVjaW1hbC1wYWQnXG4gIC8vIGlPUy1vbmx5XG4gIHwgJ2FzY2lpLWNhcGFibGUnXG4gIHwgJ251bWJlcnMtYW5kLXB1bmN0dWF0aW9uJ1xuICB8ICd1cmwnXG4gIHwgJ25hbWUtcGhvbmUtcGFkJ1xuICB8ICd0d2l0dGVyJ1xuICB8ICd3ZWItc2VhcmNoJ1xuICAvLyBpT1MgMTArIG9ubHlcbiAgfCAnYXNjaWktY2FwYWJsZS1udW1iZXItcGFkJ1xuICAvLyBBbmRyb2lkLW9ubHlcbiAgfCAndmlzaWJsZS1wYXNzd29yZCc7XG5cbmV4cG9ydCB0eXBlIFJldHVybktleVR5cGUgPVxuICAvLyBDcm9zcyBQbGF0Zm9ybVxuICB8ICdkb25lJ1xuICB8ICdnbydcbiAgfCAnbmV4dCdcbiAgfCAnc2VhcmNoJ1xuICB8ICdzZW5kJ1xuICAvLyBBbmRyb2lkLW9ubHlcbiAgfCAnbm9uZSdcbiAgfCAncHJldmlvdXMnXG4gIC8vIGlPUy1vbmx5XG4gIHwgJ2RlZmF1bHQnXG4gIHwgJ2VtZXJnZW5jeS1jYWxsJ1xuICB8ICdnb29nbGUnXG4gIHwgJ2pvaW4nXG4gIHwgJ3JvdXRlJ1xuICB8ICd5YWhvbyc7XG5cbmV4cG9ydCB0eXBlIEF1dG9DYXBpdGFsaXplID0gJ25vbmUnIHwgJ3NlbnRlbmNlcycgfCAnd29yZHMnIHwgJ2NoYXJhY3RlcnMnO1xuXG5leHBvcnQgdHlwZSBUZXh0Q29udGVudFR5cGUgPVxuICB8ICdub25lJ1xuICB8ICdVUkwnXG4gIHwgJ2FkZHJlc3NDaXR5J1xuICB8ICdhZGRyZXNzQ2l0eUFuZFN0YXRlJ1xuICB8ICdhZGRyZXNzU3RhdGUnXG4gIHwgJ2NvdW50cnlOYW1lJ1xuICB8ICdjcmVkaXRDYXJkTnVtYmVyJ1xuICB8ICdlbWFpbEFkZHJlc3MnXG4gIHwgJ2ZhbWlseU5hbWUnXG4gIHwgJ2Z1bGxTdHJlZXRBZGRyZXNzJ1xuICB8ICdnaXZlbk5hbWUnXG4gIHwgJ2pvYlRpdGxlJ1xuICB8ICdsb2NhdGlvbidcbiAgfCAnbWlkZGxlTmFtZSdcbiAgfCAnbmFtZSdcbiAgfCAnbmFtZVByZWZpeCdcbiAgfCAnbmFtZVN1ZmZpeCdcbiAgfCAnbmlja25hbWUnXG4gIHwgJ29yZ2FuaXphdGlvbk5hbWUnXG4gIHwgJ3Bvc3RhbENvZGUnXG4gIHwgJ3N0cmVldEFkZHJlc3NMaW5lMSdcbiAgfCAnc3RyZWV0QWRkcmVzc0xpbmUyJ1xuICB8ICdzdWJsb2NhbGl0eSdcbiAgfCAndGVsZXBob25lTnVtYmVyJ1xuICB8ICd1c2VybmFtZSdcbiAgfCAncGFzc3dvcmQnXG4gIHwgJ25ld1Bhc3N3b3JkJ1xuICB8ICdvbmVUaW1lQ29kZSc7XG5cbnR5cGUgUGFzc3dvcmRSdWxlcyA9IHN0cmluZztcblxudHlwZSBJT1NQcm9wcyA9ICRSZWFkT25seTx7fFxuICAvKipcbiAgICogSWYgYGZhbHNlYCwgZGlzYWJsZXMgc3BlbGwtY2hlY2sgc3R5bGUgKGkuZS4gcmVkIHVuZGVybGluZXMpLlxuICAgKiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBpbmhlcml0ZWQgZnJvbSBgYXV0b0NvcnJlY3RgLlxuICAgKiBAcGxhdGZvcm0gaW9zXG4gICAqL1xuICBzcGVsbENoZWNrPzogP2Jvb2xlYW4sXG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgdGhlIGNvbG9yIG9mIHRoZSBrZXlib2FyZC5cbiAgICogQHBsYXRmb3JtIGlvc1xuICAgKi9cbiAga2V5Ym9hcmRBcHBlYXJhbmNlPzogPygnZGVmYXVsdCcgfCAnbGlnaHQnIHwgJ2RhcmsnKSxcblxuICAvKipcbiAgICogSWYgYHRydWVgLCB0aGUga2V5Ym9hcmQgZGlzYWJsZXMgdGhlIHJldHVybiBrZXkgd2hlbiB0aGVyZSBpcyBubyB0ZXh0IGFuZFxuICAgKiBhdXRvbWF0aWNhbGx5IGVuYWJsZXMgaXQgd2hlbiB0aGVyZSBpcyB0ZXh0LiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgZmFsc2VgLlxuICAgKiBAcGxhdGZvcm0gaW9zXG4gICAqL1xuICBlbmFibGVzUmV0dXJuS2V5QXV0b21hdGljYWxseT86ID9ib29sZWFuLFxuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSBjbGVhciBidXR0b24gc2hvdWxkIGFwcGVhciBvbiB0aGUgcmlnaHQgc2lkZSBvZiB0aGUgdGV4dCB2aWV3LlxuICAgKiBUaGlzIHByb3BlcnR5IGlzIHN1cHBvcnRlZCBvbmx5IGZvciBzaW5nbGUtbGluZSBUZXh0SW5wdXQgY29tcG9uZW50LlxuICAgKiBAcGxhdGZvcm0gaW9zXG4gICAqL1xuICBjbGVhckJ1dHRvbk1vZGU/OiA/KCduZXZlcicgfCAnd2hpbGUtZWRpdGluZycgfCAndW5sZXNzLWVkaXRpbmcnIHwgJ2Fsd2F5cycpLFxuXG4gIC8qKlxuICAgKiBJZiBgdHJ1ZWAsIGNsZWFycyB0aGUgdGV4dCBmaWVsZCBhdXRvbWF0aWNhbGx5IHdoZW4gZWRpdGluZyBiZWdpbnMuXG4gICAqIEBwbGF0Zm9ybSBpb3NcbiAgICovXG4gIGNsZWFyVGV4dE9uRm9jdXM/OiA/Ym9vbGVhbixcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyB0aGUgdHlwZXMgb2YgZGF0YSBjb252ZXJ0ZWQgdG8gY2xpY2thYmxlIFVSTHMgaW4gdGhlIHRleHQgaW5wdXQuXG4gICAqIE9ubHkgdmFsaWQgaWYgYG11bHRpbGluZT17dHJ1ZX1gIGFuZCBgZWRpdGFibGU9e2ZhbHNlfWAuXG4gICAqIEJ5IGRlZmF1bHQgbm8gZGF0YSB0eXBlcyBhcmUgZGV0ZWN0ZWQuXG4gICAqXG4gICAqIFlvdSBjYW4gcHJvdmlkZSBvbmUgdHlwZSBvciBhbiBhcnJheSBvZiBtYW55IHR5cGVzLlxuICAgKlxuICAgKiBQb3NzaWJsZSB2YWx1ZXMgZm9yIGBkYXRhRGV0ZWN0b3JUeXBlc2AgYXJlOlxuICAgKlxuICAgKiAtIGAncGhvbmVOdW1iZXInYFxuICAgKiAtIGAnbGluaydgXG4gICAqIC0gYCdhZGRyZXNzJ2BcbiAgICogLSBgJ2NhbGVuZGFyRXZlbnQnYFxuICAgKiAtIGAnbm9uZSdgXG4gICAqIC0gYCdhbGwnYFxuICAgKlxuICAgKiBAcGxhdGZvcm0gaW9zXG4gICAqL1xuICBkYXRhRGV0ZWN0b3JUeXBlcz86XG4gICAgfCA/RGF0YURldGVjdG9yVHlwZXNUeXBlXG4gICAgfCAkUmVhZE9ubHlBcnJheTxEYXRhRGV0ZWN0b3JUeXBlc1R5cGU+LFxuXG4gIC8qKlxuICAgKiBBbiBvcHRpb25hbCBpZGVudGlmaWVyIHdoaWNoIGxpbmtzIGEgY3VzdG9tIElucHV0QWNjZXNzb3J5VmlldyB0b1xuICAgKiB0aGlzIHRleHQgaW5wdXQuIFRoZSBJbnB1dEFjY2Vzc29yeVZpZXcgaXMgcmVuZGVyZWQgYWJvdmUgdGhlXG4gICAqIGtleWJvYXJkIHdoZW4gdGhpcyB0ZXh0IGlucHV0IGlzIGZvY3VzZWQuXG4gICAqIEBwbGF0Zm9ybSBpb3NcbiAgICovXG4gIGlucHV0QWNjZXNzb3J5Vmlld0lEPzogP3N0cmluZyxcblxuICAvKipcbiAgICogR2l2ZSB0aGUga2V5Ym9hcmQgYW5kIHRoZSBzeXN0ZW0gaW5mb3JtYXRpb24gYWJvdXQgdGhlXG4gICAqIGV4cGVjdGVkIHNlbWFudGljIG1lYW5pbmcgZm9yIHRoZSBjb250ZW50IHRoYXQgdXNlcnMgZW50ZXIuXG4gICAqIEBwbGF0Zm9ybSBpb3NcbiAgICovXG4gIHRleHRDb250ZW50VHlwZT86ID9UZXh0Q29udGVudFR5cGUsXG5cbiAgLyoqXG4gICAqIFByb3ZpZGUgcnVsZXMgZm9yIHlvdXIgcGFzc3dvcmQuXG4gICAqIEZvciBleGFtcGxlLCBzYXkgeW91IHdhbnQgdG8gcmVxdWlyZSBhIHBhc3N3b3JkIHdpdGggYXQgbGVhc3QgZWlnaHQgY2hhcmFjdGVycyBjb25zaXN0aW5nIG9mIGEgbWl4IG9mIHVwcGVyY2FzZSBhbmQgbG93ZXJjYXNlIGxldHRlcnMsIGF0IGxlYXN0IG9uZSBudW1iZXIsIGFuZCBhdCBtb3N0IHR3byBjb25zZWN1dGl2ZSBjaGFyYWN0ZXJzLlxuICAgKiBcInJlcXVpcmVkOiB1cHBlcjsgcmVxdWlyZWQ6IGxvd2VyOyByZXF1aXJlZDogZGlnaXQ7IG1heC1jb25zZWN1dGl2ZTogMjsgbWlubGVuZ3RoOiA4O1wiXG4gICAqIEBwbGF0Zm9ybSBpb3NcbiAgICovXG4gIHBhc3N3b3JkUnVsZXM/OiA/UGFzc3dvcmRSdWxlcyxcblxuICAvKlxuICAgKiBJZiBgdHJ1ZWAsIGFsbG93cyBUZXh0SW5wdXQgdG8gcGFzcyB0b3VjaCBldmVudHMgdG8gdGhlIHBhcmVudCBjb21wb25lbnQuXG4gICAqIFRoaXMgYWxsb3dzIGNvbXBvbmVudHMgdG8gYmUgc3dpcGVhYmxlIGZyb20gdGhlIFRleHRJbnB1dCBvbiBpT1MsXG4gICAqIGFzIGlzIHRoZSBjYXNlIG9uIEFuZHJvaWQgYnkgZGVmYXVsdC5cbiAgICogSWYgYGZhbHNlYCwgVGV4dElucHV0IGFsd2F5cyBhc2tzIHRvIGhhbmRsZSB0aGUgaW5wdXQgKGV4Y2VwdCB3aGVuIGRpc2FibGVkKS5cbiAgICogQHBsYXRmb3JtIGlvc1xuICAgKi9cbiAgcmVqZWN0UmVzcG9uZGVyVGVybWluYXRpb24/OiA/Ym9vbGVhbixcblxuICAvKipcbiAgICogSWYgYGZhbHNlYCwgc2Nyb2xsaW5nIG9mIHRoZSB0ZXh0IHZpZXcgd2lsbCBiZSBkaXNhYmxlZC5cbiAgICogVGhlIGRlZmF1bHQgdmFsdWUgaXMgYHRydWVgLiBEb2VzIG9ubHkgd29yayB3aXRoICdtdWx0aWxpbmU9e3RydWV9Jy5cbiAgICogQHBsYXRmb3JtIGlvc1xuICAgKi9cbiAgc2Nyb2xsRW5hYmxlZD86ID9ib29sZWFuLFxufH0+O1xuXG50eXBlIEFuZHJvaWRQcm9wcyA9ICRSZWFkT25seTx7fFxuICAvKipcbiAgICogRGV0ZXJtaW5lcyB3aGljaCBjb250ZW50IHRvIHN1Z2dlc3Qgb24gYXV0byBjb21wbGV0ZSwgZS5nLmB1c2VybmFtZWAuXG4gICAqIFRvIGRpc2FibGUgYXV0byBjb21wbGV0ZSwgdXNlIGBvZmZgLlxuICAgKlxuICAgKiAqQW5kcm9pZCBPbmx5KlxuICAgKlxuICAgKiBUaGUgZm9sbG93aW5nIHZhbHVlcyB3b3JrIG9uIEFuZHJvaWQgb25seTpcbiAgICpcbiAgICogLSBgdXNlcm5hbWVgXG4gICAqIC0gYHBhc3N3b3JkYFxuICAgKiAtIGBlbWFpbGBcbiAgICogLSBgbmFtZWBcbiAgICogLSBgdGVsYFxuICAgKiAtIGBzdHJlZXQtYWRkcmVzc2BcbiAgICogLSBgcG9zdGFsLWNvZGVgXG4gICAqIC0gYGNjLW51bWJlcmBcbiAgICogLSBgY2MtY3NjYFxuICAgKiAtIGBjYy1leHBgXG4gICAqIC0gYGNjLWV4cC1tb250aGBcbiAgICogLSBgY2MtZXhwLXllYXJgXG4gICAqIC0gYG9mZmBcbiAgICpcbiAgICogQHBsYXRmb3JtIGFuZHJvaWRcbiAgICovXG4gIGF1dG9Db21wbGV0ZVR5cGU/OiA/KFxuICAgIHwgJ2NjLWNzYydcbiAgICB8ICdjYy1leHAnXG4gICAgfCAnY2MtZXhwLW1vbnRoJ1xuICAgIHwgJ2NjLWV4cC15ZWFyJ1xuICAgIHwgJ2NjLW51bWJlcidcbiAgICB8ICdlbWFpbCdcbiAgICB8ICduYW1lJ1xuICAgIHwgJ3Bhc3N3b3JkJ1xuICAgIHwgJ3Bvc3RhbC1jb2RlJ1xuICAgIHwgJ3N0cmVldC1hZGRyZXNzJ1xuICAgIHwgJ3RlbCdcbiAgICB8ICd1c2VybmFtZSdcbiAgICB8ICdvZmYnXG4gICksXG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHJldHVybiBrZXkgdG8gdGhlIGxhYmVsLiBVc2UgaXQgaW5zdGVhZCBvZiBgcmV0dXJuS2V5VHlwZWAuXG4gICAqIEBwbGF0Zm9ybSBhbmRyb2lkXG4gICAqL1xuICByZXR1cm5LZXlMYWJlbD86ID9zdHJpbmcsXG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIG51bWJlciBvZiBsaW5lcyBmb3IgYSBgVGV4dElucHV0YC4gVXNlIGl0IHdpdGggbXVsdGlsaW5lIHNldCB0b1xuICAgKiBgdHJ1ZWAgdG8gYmUgYWJsZSB0byBmaWxsIHRoZSBsaW5lcy5cbiAgICogQHBsYXRmb3JtIGFuZHJvaWRcbiAgICovXG4gIG51bWJlck9mTGluZXM/OiA/bnVtYmVyLFxuXG4gIC8qKlxuICAgKiBXaGVuIGBmYWxzZWAsIGlmIHRoZXJlIGlzIGEgc21hbGwgYW1vdW50IG9mIHNwYWNlIGF2YWlsYWJsZSBhcm91bmQgYSB0ZXh0IGlucHV0XG4gICAqIChlLmcuIGxhbmRzY2FwZSBvcmllbnRhdGlvbiBvbiBhIHBob25lKSwgdGhlIE9TIG1heSBjaG9vc2UgdG8gaGF2ZSB0aGUgdXNlciBlZGl0XG4gICAqIHRoZSB0ZXh0IGluc2lkZSBvZiBhIGZ1bGwgc2NyZWVuIHRleHQgaW5wdXQgbW9kZS4gV2hlbiBgdHJ1ZWAsIHRoaXMgZmVhdHVyZSBpc1xuICAgKiBkaXNhYmxlZCBhbmQgdXNlcnMgd2lsbCBhbHdheXMgZWRpdCB0aGUgdGV4dCBkaXJlY3RseSBpbnNpZGUgb2YgdGhlIHRleHQgaW5wdXQuXG4gICAqIERlZmF1bHRzIHRvIGBmYWxzZWAuXG4gICAqIEBwbGF0Zm9ybSBhbmRyb2lkXG4gICAqL1xuICBkaXNhYmxlRnVsbHNjcmVlblVJPzogP2Jvb2xlYW4sXG5cbiAgLyoqXG4gICAqIFNldCB0ZXh0IGJyZWFrIHN0cmF0ZWd5IG9uIEFuZHJvaWQgQVBJIExldmVsIDIzKywgcG9zc2libGUgdmFsdWVzIGFyZSBgc2ltcGxlYCwgYGhpZ2hRdWFsaXR5YCwgYGJhbGFuY2VkYFxuICAgKiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgc2ltcGxlYC5cbiAgICogQHBsYXRmb3JtIGFuZHJvaWRcbiAgICovXG4gIHRleHRCcmVha1N0cmF0ZWd5PzogPygnc2ltcGxlJyB8ICdoaWdoUXVhbGl0eScgfCAnYmFsYW5jZWQnKSxcblxuICAvKipcbiAgICogVGhlIGNvbG9yIG9mIHRoZSBgVGV4dElucHV0YCB1bmRlcmxpbmUuXG4gICAqIEBwbGF0Zm9ybSBhbmRyb2lkXG4gICAqL1xuICB1bmRlcmxpbmVDb2xvckFuZHJvaWQ/OiA/Q29sb3JWYWx1ZSxcblxuICAvKipcbiAgICogSWYgZGVmaW5lZCwgdGhlIHByb3ZpZGVkIGltYWdlIHJlc291cmNlIHdpbGwgYmUgcmVuZGVyZWQgb24gdGhlIGxlZnQuXG4gICAqIFRoZSBpbWFnZSByZXNvdXJjZSBtdXN0IGJlIGluc2lkZSBgL2FuZHJvaWQvYXBwL3NyYy9tYWluL3Jlcy9kcmF3YWJsZWAgYW5kIHJlZmVyZW5jZWRcbiAgICogbGlrZVxuICAgKiBgYGBcbiAgICogPFRleHRJbnB1dFxuICAgKiAgaW5saW5lSW1hZ2VMZWZ0PSdzZWFyY2hfaWNvbidcbiAgICogLz5cbiAgICogYGBgXG4gICAqIEBwbGF0Zm9ybSBhbmRyb2lkXG4gICAqL1xuICBpbmxpbmVJbWFnZUxlZnQ/OiA/c3RyaW5nLFxuXG4gIC8qKlxuICAgKiBQYWRkaW5nIGJldHdlZW4gdGhlIGlubGluZSBpbWFnZSwgaWYgYW55LCBhbmQgdGhlIHRleHQgaW5wdXQgaXRzZWxmLlxuICAgKiBAcGxhdGZvcm0gYW5kcm9pZFxuICAgKi9cbiAgaW5saW5lSW1hZ2VQYWRkaW5nPzogP251bWJlcixcblxuICBpbXBvcnRhbnRGb3JBdXRvZmlsbD86ID8oXG4gICAgfCAnYXV0bydcbiAgICB8ICdubydcbiAgICB8ICdub0V4Y2x1ZGVEZXNjZW5kYW50cydcbiAgICB8ICd5ZXMnXG4gICAgfCAneWVzRXhjbHVkZURlc2NlbmRhbnRzJ1xuICApLFxuXG4gIC8qKlxuICAgKiBXaGVuIGBmYWxzZWAsIGl0IHdpbGwgcHJldmVudCB0aGUgc29mdCBrZXlib2FyZCBmcm9tIHNob3dpbmcgd2hlbiB0aGUgZmllbGQgaXMgZm9jdXNlZC5cbiAgICogRGVmYXVsdHMgdG8gYHRydWVgLlxuICAgKiBAcGxhdGZvcm0gYW5kcm9pZFxuICAgKi9cbiAgc2hvd1NvZnRJbnB1dE9uRm9jdXM/OiA/Ym9vbGVhbixcbnx9PjtcblxuZXhwb3J0IHR5cGUgUHJvcHMgPSAkUmVhZE9ubHk8e3xcbiAgLi4uJERpZmY8Vmlld1Byb3BzLCAkUmVhZE9ubHk8e3xzdHlsZTogP1ZpZXdTdHlsZVByb3B8fT4+LFxuICAuLi5JT1NQcm9wcyxcbiAgLi4uQW5kcm9pZFByb3BzLFxuXG4gIC8qKlxuICAgKiBDYW4gdGVsbCBgVGV4dElucHV0YCB0byBhdXRvbWF0aWNhbGx5IGNhcGl0YWxpemUgY2VydGFpbiBjaGFyYWN0ZXJzLlxuICAgKlxuICAgKiAtIGBjaGFyYWN0ZXJzYDogYWxsIGNoYXJhY3RlcnMuXG4gICAqIC0gYHdvcmRzYDogZmlyc3QgbGV0dGVyIG9mIGVhY2ggd29yZC5cbiAgICogLSBgc2VudGVuY2VzYDogZmlyc3QgbGV0dGVyIG9mIGVhY2ggc2VudGVuY2UgKCpkZWZhdWx0KikuXG4gICAqIC0gYG5vbmVgOiBkb24ndCBhdXRvIGNhcGl0YWxpemUgYW55dGhpbmcuXG4gICAqL1xuICBhdXRvQ2FwaXRhbGl6ZT86ID9BdXRvQ2FwaXRhbGl6ZSxcblxuICAvKipcbiAgICogSWYgYGZhbHNlYCwgZGlzYWJsZXMgYXV0by1jb3JyZWN0LiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgdHJ1ZWAuXG4gICAqL1xuICBhdXRvQ29ycmVjdD86ID9ib29sZWFuLFxuXG4gIC8qKlxuICAgKiBJZiBgdHJ1ZWAsIGZvY3VzZXMgdGhlIGlucHV0IG9uIGBjb21wb25lbnREaWRNb3VudGAuXG4gICAqIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGBmYWxzZWAuXG4gICAqL1xuICBhdXRvRm9jdXM/OiA/Ym9vbGVhbixcblxuICAvKipcbiAgICogU3BlY2lmaWVzIHdoZXRoZXIgZm9udHMgc2hvdWxkIHNjYWxlIHRvIHJlc3BlY3QgVGV4dCBTaXplIGFjY2Vzc2liaWxpdHkgc2V0dGluZ3MuIFRoZVxuICAgKiBkZWZhdWx0IGlzIGB0cnVlYC5cbiAgICovXG4gIGFsbG93Rm9udFNjYWxpbmc/OiA/Ym9vbGVhbixcblxuICAvKipcbiAgICogU3BlY2lmaWVzIGxhcmdlc3QgcG9zc2libGUgc2NhbGUgYSBmb250IGNhbiByZWFjaCB3aGVuIGBhbGxvd0ZvbnRTY2FsaW5nYCBpcyBlbmFibGVkLlxuICAgKiBQb3NzaWJsZSB2YWx1ZXM6XG4gICAqIGBudWxsL3VuZGVmaW5lZGAgKGRlZmF1bHQpOiBpbmhlcml0IGZyb20gdGhlIHBhcmVudCBub2RlIG9yIHRoZSBnbG9iYWwgZGVmYXVsdCAoMClcbiAgICogYDBgOiBubyBtYXgsIGlnbm9yZSBwYXJlbnQvZ2xvYmFsIGRlZmF1bHRcbiAgICogYD49IDFgOiBzZXRzIHRoZSBtYXhGb250U2l6ZU11bHRpcGxpZXIgb2YgdGhpcyBub2RlIHRvIHRoaXMgdmFsdWVcbiAgICovXG4gIG1heEZvbnRTaXplTXVsdGlwbGllcj86ID9udW1iZXIsXG5cbiAgLyoqXG4gICAqIElmIGBmYWxzZWAsIHRleHQgaXMgbm90IGVkaXRhYmxlLiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgdHJ1ZWAuXG4gICAqL1xuICBlZGl0YWJsZT86ID9ib29sZWFuLFxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHdoaWNoIGtleWJvYXJkIHRvIG9wZW4sIGUuZy5gbnVtZXJpY2AuXG4gICAqXG4gICAqIFRoZSBmb2xsb3dpbmcgdmFsdWVzIHdvcmsgYWNyb3NzIHBsYXRmb3JtczpcbiAgICpcbiAgICogLSBgZGVmYXVsdGBcbiAgICogLSBgbnVtZXJpY2BcbiAgICogLSBgbnVtYmVyLXBhZGBcbiAgICogLSBgZGVjaW1hbC1wYWRgXG4gICAqIC0gYGVtYWlsLWFkZHJlc3NgXG4gICAqIC0gYHBob25lLXBhZGBcbiAgICpcbiAgICogKmlPUyBPbmx5KlxuICAgKlxuICAgKiBUaGUgZm9sbG93aW5nIHZhbHVlcyB3b3JrIG9uIGlPUyBvbmx5OlxuICAgKlxuICAgKiAtIGBhc2NpaS1jYXBhYmxlYFxuICAgKiAtIGBudW1iZXJzLWFuZC1wdW5jdHVhdGlvbmBcbiAgICogLSBgdXJsYFxuICAgKiAtIGBuYW1lLXBob25lLXBhZGBcbiAgICogLSBgdHdpdHRlcmBcbiAgICogLSBgd2ViLXNlYXJjaGBcbiAgICpcbiAgICogKkFuZHJvaWQgT25seSpcbiAgICpcbiAgICogVGhlIGZvbGxvd2luZyB2YWx1ZXMgd29yayBvbiBBbmRyb2lkIG9ubHk6XG4gICAqXG4gICAqIC0gYHZpc2libGUtcGFzc3dvcmRgXG4gICAqXG4gICAqIE9uIEFuZHJvaWQgZGV2aWNlcyBtYW51ZmFjdHVyZWQgYnkgWGlhb21pIHdpdGggQW5kcm9pZCBRLCAnZW1haWwtYWRkcmVzcydcbiAgICogdHlwZSB3aWxsIGJlIHJlcGxhY2VkIGluIG5hdGl2ZSBieSAnZGVmYXVsdCcgdG8gcHJldmVudCBhIHN5c3RlbSByZWxhdGVkIGNyYXNoLlxuICAgKi9cbiAga2V5Ym9hcmRUeXBlPzogP0tleWJvYXJkVHlwZSxcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBob3cgdGhlIHJldHVybiBrZXkgc2hvdWxkIGxvb2suIE9uIEFuZHJvaWQgeW91IGNhbiBhbHNvIHVzZVxuICAgKiBgcmV0dXJuS2V5TGFiZWxgLlxuICAgKlxuICAgKiAqQ3Jvc3MgcGxhdGZvcm0qXG4gICAqXG4gICAqIFRoZSBmb2xsb3dpbmcgdmFsdWVzIHdvcmsgYWNyb3NzIHBsYXRmb3JtczpcbiAgICpcbiAgICogLSBgZG9uZWBcbiAgICogLSBgZ29gXG4gICAqIC0gYG5leHRgXG4gICAqIC0gYHNlYXJjaGBcbiAgICogLSBgc2VuZGBcbiAgICpcbiAgICogKkFuZHJvaWQgT25seSpcbiAgICpcbiAgICogVGhlIGZvbGxvd2luZyB2YWx1ZXMgd29yayBvbiBBbmRyb2lkIG9ubHk6XG4gICAqXG4gICAqIC0gYG5vbmVgXG4gICAqIC0gYHByZXZpb3VzYFxuICAgKlxuICAgKiAqaU9TIE9ubHkqXG4gICAqXG4gICAqIFRoZSBmb2xsb3dpbmcgdmFsdWVzIHdvcmsgb24gaU9TIG9ubHk6XG4gICAqXG4gICAqIC0gYGRlZmF1bHRgXG4gICAqIC0gYGVtZXJnZW5jeS1jYWxsYFxuICAgKiAtIGBnb29nbGVgXG4gICAqIC0gYGpvaW5gXG4gICAqIC0gYHJvdXRlYFxuICAgKiAtIGB5YWhvb2BcbiAgICovXG4gIHJldHVybktleVR5cGU/OiA/UmV0dXJuS2V5VHlwZSxcblxuICAvKipcbiAgICogTGltaXRzIHRoZSBtYXhpbXVtIG51bWJlciBvZiBjaGFyYWN0ZXJzIHRoYXQgY2FuIGJlIGVudGVyZWQuIFVzZSB0aGlzXG4gICAqIGluc3RlYWQgb2YgaW1wbGVtZW50aW5nIHRoZSBsb2dpYyBpbiBKUyB0byBhdm9pZCBmbGlja2VyLlxuICAgKi9cbiAgbWF4TGVuZ3RoPzogP251bWJlcixcblxuICAvKipcbiAgICogSWYgYHRydWVgLCB0aGUgdGV4dCBpbnB1dCBjYW4gYmUgbXVsdGlwbGUgbGluZXMuXG4gICAqIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGBmYWxzZWAuXG4gICAqL1xuICBtdWx0aWxpbmU/OiA/Ym9vbGVhbixcblxuICAvKipcbiAgICogQ2FsbGJhY2sgdGhhdCBpcyBjYWxsZWQgd2hlbiB0aGUgdGV4dCBpbnB1dCBpcyBibHVycmVkLlxuICAgKi9cbiAgb25CbHVyPzogPyhlOiBCbHVyRXZlbnQpID0+IG1peGVkLFxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB0aGF0IGlzIGNhbGxlZCB3aGVuIHRoZSB0ZXh0IGlucHV0IGlzIGZvY3VzZWQuXG4gICAqL1xuICBvbkZvY3VzPzogPyhlOiBGb2N1c0V2ZW50KSA9PiBtaXhlZCxcblxuICAvKipcbiAgICogQ2FsbGJhY2sgdGhhdCBpcyBjYWxsZWQgd2hlbiB0aGUgdGV4dCBpbnB1dCdzIHRleHQgY2hhbmdlcy5cbiAgICovXG4gIG9uQ2hhbmdlPzogPyhlOiBDaGFuZ2VFdmVudCkgPT4gbWl4ZWQsXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIHRoYXQgaXMgY2FsbGVkIHdoZW4gdGhlIHRleHQgaW5wdXQncyB0ZXh0IGNoYW5nZXMuXG4gICAqIENoYW5nZWQgdGV4dCBpcyBwYXNzZWQgYXMgYW4gYXJndW1lbnQgdG8gdGhlIGNhbGxiYWNrIGhhbmRsZXIuXG4gICAqL1xuICBvbkNoYW5nZVRleHQ/OiA/KHRleHQ6IHN0cmluZykgPT4gbWl4ZWQsXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIHRoYXQgaXMgY2FsbGVkIHdoZW4gdGhlIHRleHQgaW5wdXQncyBjb250ZW50IHNpemUgY2hhbmdlcy5cbiAgICogVGhpcyB3aWxsIGJlIGNhbGxlZCB3aXRoXG4gICAqIGB7IG5hdGl2ZUV2ZW50OiB7IGNvbnRlbnRTaXplOiB7IHdpZHRoLCBoZWlnaHQgfSB9IH1gLlxuICAgKlxuICAgKiBPbmx5IGNhbGxlZCBmb3IgbXVsdGlsaW5lIHRleHQgaW5wdXRzLlxuICAgKi9cbiAgb25Db250ZW50U2l6ZUNoYW5nZT86ID8oZTogQ29udGVudFNpemVDaGFuZ2VFdmVudCkgPT4gbWl4ZWQsXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIHRoYXQgaXMgY2FsbGVkIHdoZW4gdGV4dCBpbnB1dCBlbmRzLlxuICAgKi9cbiAgb25FbmRFZGl0aW5nPzogPyhlOiBFZGl0aW5nRXZlbnQpID0+IG1peGVkLFxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB0aGF0IGlzIGNhbGxlZCB3aGVuIHRoZSB0ZXh0IGlucHV0IHNlbGVjdGlvbiBpcyBjaGFuZ2VkLlxuICAgKiBUaGlzIHdpbGwgYmUgY2FsbGVkIHdpdGhcbiAgICogYHsgbmF0aXZlRXZlbnQ6IHsgc2VsZWN0aW9uOiB7IHN0YXJ0LCBlbmQgfSB9IH1gLlxuICAgKi9cbiAgb25TZWxlY3Rpb25DaGFuZ2U/OiA/KGU6IFNlbGVjdGlvbkNoYW5nZUV2ZW50KSA9PiBtaXhlZCxcblxuICAvKipcbiAgICogQ2FsbGJhY2sgdGhhdCBpcyBjYWxsZWQgd2hlbiB0aGUgdGV4dCBpbnB1dCdzIHN1Ym1pdCBidXR0b24gaXMgcHJlc3NlZC5cbiAgICogSW52YWxpZCBpZiBgbXVsdGlsaW5lPXt0cnVlfWAgaXMgc3BlY2lmaWVkLlxuICAgKi9cbiAgb25TdWJtaXRFZGl0aW5nPzogPyhlOiBFZGl0aW5nRXZlbnQpID0+IG1peGVkLFxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB0aGF0IGlzIGNhbGxlZCB3aGVuIGEga2V5IGlzIHByZXNzZWQuXG4gICAqIFRoaXMgd2lsbCBiZSBjYWxsZWQgd2l0aCBgeyBuYXRpdmVFdmVudDogeyBrZXk6IGtleVZhbHVlIH0gfWBcbiAgICogd2hlcmUgYGtleVZhbHVlYCBpcyBgJ0VudGVyJ2Agb3IgYCdCYWNrc3BhY2UnYCBmb3IgcmVzcGVjdGl2ZSBrZXlzIGFuZFxuICAgKiB0aGUgdHlwZWQtaW4gY2hhcmFjdGVyIG90aGVyd2lzZSBpbmNsdWRpbmcgYCcgJ2AgZm9yIHNwYWNlLlxuICAgKiBGaXJlcyBiZWZvcmUgYG9uQ2hhbmdlYCBjYWxsYmFja3MuXG4gICAqL1xuICBvbktleVByZXNzPzogPyhlOiBLZXlQcmVzc0V2ZW50KSA9PiBtaXhlZCxcblxuICAvKipcbiAgICogSW52b2tlZCBvbiBjb250ZW50IHNjcm9sbCB3aXRoIGB7IG5hdGl2ZUV2ZW50OiB7IGNvbnRlbnRPZmZzZXQ6IHsgeCwgeSB9IH0gfWAuXG4gICAqIE1heSBhbHNvIGNvbnRhaW4gb3RoZXIgcHJvcGVydGllcyBmcm9tIFNjcm9sbEV2ZW50IGJ1dCBvbiBBbmRyb2lkIGNvbnRlbnRTaXplXG4gICAqIGlzIG5vdCBwcm92aWRlZCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy5cbiAgICovXG4gIG9uU2Nyb2xsPzogPyhlOiBTY3JvbGxFdmVudCkgPT4gbWl4ZWQsXG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgdGhhdCB3aWxsIGJlIHJlbmRlcmVkIGJlZm9yZSB0ZXh0IGlucHV0IGhhcyBiZWVuIGVudGVyZWQuXG4gICAqL1xuICBwbGFjZWhvbGRlcj86ID9TdHJpbmdpc2gsXG5cbiAgLyoqXG4gICAqIFRoZSB0ZXh0IGNvbG9yIG9mIHRoZSBwbGFjZWhvbGRlciBzdHJpbmcuXG4gICAqL1xuICBwbGFjZWhvbGRlclRleHRDb2xvcj86ID9Db2xvclZhbHVlLFxuXG4gIC8qKlxuICAgKiBJZiBgdHJ1ZWAsIHRoZSB0ZXh0IGlucHV0IG9ic2N1cmVzIHRoZSB0ZXh0IGVudGVyZWQgc28gdGhhdCBzZW5zaXRpdmUgdGV4dFxuICAgKiBsaWtlIHBhc3N3b3JkcyBzdGF5IHNlY3VyZS4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGZhbHNlYC4gRG9lcyBub3Qgd29yayB3aXRoICdtdWx0aWxpbmU9e3RydWV9Jy5cbiAgICovXG4gIHNlY3VyZVRleHRFbnRyeT86ID9ib29sZWFuLFxuXG4gIC8qKlxuICAgKiBUaGUgaGlnaGxpZ2h0IGFuZCBjdXJzb3IgY29sb3Igb2YgdGhlIHRleHQgaW5wdXQuXG4gICAqL1xuICBzZWxlY3Rpb25Db2xvcj86ID9Db2xvclZhbHVlLFxuXG4gIC8qKlxuICAgKiBUaGUgc3RhcnQgYW5kIGVuZCBvZiB0aGUgdGV4dCBpbnB1dCdzIHNlbGVjdGlvbi4gU2V0IHN0YXJ0IGFuZCBlbmQgdG9cbiAgICogdGhlIHNhbWUgdmFsdWUgdG8gcG9zaXRpb24gdGhlIGN1cnNvci5cbiAgICovXG4gIHNlbGVjdGlvbj86ID8kUmVhZE9ubHk8e3xcbiAgICBzdGFydDogbnVtYmVyLFxuICAgIGVuZD86ID9udW1iZXIsXG4gIHx9PixcblxuICAvKipcbiAgICogVGhlIHZhbHVlIHRvIHNob3cgZm9yIHRoZSB0ZXh0IGlucHV0LiBgVGV4dElucHV0YCBpcyBhIGNvbnRyb2xsZWRcbiAgICogY29tcG9uZW50LCB3aGljaCBtZWFucyB0aGUgbmF0aXZlIHZhbHVlIHdpbGwgYmUgZm9yY2VkIHRvIG1hdGNoIHRoaXNcbiAgICogdmFsdWUgcHJvcCBpZiBwcm92aWRlZC4gRm9yIG1vc3QgdXNlcywgdGhpcyB3b3JrcyBncmVhdCwgYnV0IGluIHNvbWVcbiAgICogY2FzZXMgdGhpcyBtYXkgY2F1c2UgZmxpY2tlcmluZyAtIG9uZSBjb21tb24gY2F1c2UgaXMgcHJldmVudGluZyBlZGl0c1xuICAgKiBieSBrZWVwaW5nIHZhbHVlIHRoZSBzYW1lLiBJbiBhZGRpdGlvbiB0byBzaW1wbHkgc2V0dGluZyB0aGUgc2FtZSB2YWx1ZSxcbiAgICogZWl0aGVyIHNldCBgZWRpdGFibGU9e2ZhbHNlfWAsIG9yIHNldC91cGRhdGUgYG1heExlbmd0aGAgdG8gcHJldmVudFxuICAgKiB1bndhbnRlZCBlZGl0cyB3aXRob3V0IGZsaWNrZXIuXG4gICAqL1xuICB2YWx1ZT86ID9TdHJpbmdpc2gsXG5cbiAgLyoqXG4gICAqIFByb3ZpZGVzIGFuIGluaXRpYWwgdmFsdWUgdGhhdCB3aWxsIGNoYW5nZSB3aGVuIHRoZSB1c2VyIHN0YXJ0cyB0eXBpbmcuXG4gICAqIFVzZWZ1bCBmb3Igc2ltcGxlIHVzZS1jYXNlcyB3aGVyZSB5b3UgZG8gbm90IHdhbnQgdG8gZGVhbCB3aXRoIGxpc3RlbmluZ1xuICAgKiB0byBldmVudHMgYW5kIHVwZGF0aW5nIHRoZSB2YWx1ZSBwcm9wIHRvIGtlZXAgdGhlIGNvbnRyb2xsZWQgc3RhdGUgaW4gc3luYy5cbiAgICovXG4gIGRlZmF1bHRWYWx1ZT86ID9TdHJpbmdpc2gsXG5cbiAgLyoqXG4gICAqIElmIGB0cnVlYCwgYWxsIHRleHQgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIHNlbGVjdGVkIG9uIGZvY3VzLlxuICAgKi9cbiAgc2VsZWN0VGV4dE9uRm9jdXM/OiA/Ym9vbGVhbixcblxuICAvKipcbiAgICogSWYgYHRydWVgLCB0aGUgdGV4dCBmaWVsZCB3aWxsIGJsdXIgd2hlbiBzdWJtaXR0ZWQuXG4gICAqIFRoZSBkZWZhdWx0IHZhbHVlIGlzIHRydWUgZm9yIHNpbmdsZS1saW5lIGZpZWxkcyBhbmQgZmFsc2UgZm9yXG4gICAqIG11bHRpbGluZSBmaWVsZHMuIE5vdGUgdGhhdCBmb3IgbXVsdGlsaW5lIGZpZWxkcywgc2V0dGluZyBgYmx1ck9uU3VibWl0YFxuICAgKiB0byBgdHJ1ZWAgbWVhbnMgdGhhdCBwcmVzc2luZyByZXR1cm4gd2lsbCBibHVyIHRoZSBmaWVsZCBhbmQgdHJpZ2dlciB0aGVcbiAgICogYG9uU3VibWl0RWRpdGluZ2AgZXZlbnQgaW5zdGVhZCBvZiBpbnNlcnRpbmcgYSBuZXdsaW5lIGludG8gdGhlIGZpZWxkLlxuICAgKi9cbiAgYmx1ck9uU3VibWl0PzogP2Jvb2xlYW4sXG5cbiAgLyoqXG4gICAqIE5vdGUgdGhhdCBub3QgYWxsIFRleHQgc3R5bGVzIGFyZSBzdXBwb3J0ZWQsIGFuIGluY29tcGxldGUgbGlzdCBvZiB3aGF0IGlzIG5vdCBzdXBwb3J0ZWQgaW5jbHVkZXM6XG4gICAqXG4gICAqIC0gYGJvcmRlckxlZnRXaWR0aGBcbiAgICogLSBgYm9yZGVyVG9wV2lkdGhgXG4gICAqIC0gYGJvcmRlclJpZ2h0V2lkdGhgXG4gICAqIC0gYGJvcmRlckJvdHRvbVdpZHRoYFxuICAgKiAtIGBib3JkZXJUb3BMZWZ0UmFkaXVzYFxuICAgKiAtIGBib3JkZXJUb3BSaWdodFJhZGl1c2BcbiAgICogLSBgYm9yZGVyQm90dG9tUmlnaHRSYWRpdXNgXG4gICAqIC0gYGJvcmRlckJvdHRvbUxlZnRSYWRpdXNgXG4gICAqXG4gICAqIHNlZSBbSXNzdWUjNzA3MF0oaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0LW5hdGl2ZS9pc3N1ZXMvNzA3MClcbiAgICogZm9yIG1vcmUgZGV0YWlsLlxuICAgKlxuICAgKiBbU3R5bGVzXShkb2NzL3N0eWxlLmh0bWwpXG4gICAqL1xuICBzdHlsZT86ID9UZXh0U3R5bGVQcm9wLFxuXG4gIC8qKlxuICAgKiBJZiBgdHJ1ZWAsIGNhcmV0IGlzIGhpZGRlbi4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGZhbHNlYC5cbiAgICogVGhpcyBwcm9wZXJ0eSBpcyBzdXBwb3J0ZWQgb25seSBmb3Igc2luZ2xlLWxpbmUgVGV4dElucHV0IGNvbXBvbmVudCBvbiBpT1MuXG4gICAqL1xuICBjYXJldEhpZGRlbj86ID9ib29sZWFuLFxuXG4gIC8qXG4gICAqIElmIGB0cnVlYCwgY29udGV4dE1lbnVIaWRkZW4gaXMgaGlkZGVuLiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgZmFsc2VgLlxuICAgKi9cbiAgY29udGV4dE1lbnVIaWRkZW4/OiA/Ym9vbGVhbixcblxuICBmb3J3YXJkZWRSZWY/OiA/UmVhY3RSZWZTZXR0ZXI8XG4gICAgUmVhY3QuRWxlbWVudFJlZjxIb3N0Q29tcG9uZW50PG1peGVkPj4gJiBJbXBlcmF0aXZlTWV0aG9kcyxcbiAgPixcbnx9PjtcblxudHlwZSBJbXBlcmF0aXZlTWV0aG9kcyA9ICRSZWFkT25seTx7fFxuICBjbGVhcjogKCkgPT4gdm9pZCxcbiAgaXNGb2N1c2VkOiAoKSA9PiBib29sZWFuLFxuICBnZXROYXRpdmVSZWY6ICgpID0+ID9SZWFjdC5FbGVtZW50UmVmPEhvc3RDb21wb25lbnQ8bWl4ZWQ+Pixcbnx9PjtcblxuY29uc3QgZW1wdHlGdW5jdGlvblRoYXRSZXR1cm5zVHJ1ZSA9ICgpID0+IHRydWU7XG5cbi8qKlxuICogQSBmb3VuZGF0aW9uYWwgY29tcG9uZW50IGZvciBpbnB1dHRpbmcgdGV4dCBpbnRvIHRoZSBhcHAgdmlhIGFcbiAqIGtleWJvYXJkLiBQcm9wcyBwcm92aWRlIGNvbmZpZ3VyYWJpbGl0eSBmb3Igc2V2ZXJhbCBmZWF0dXJlcywgc3VjaCBhc1xuICogYXV0by1jb3JyZWN0aW9uLCBhdXRvLWNhcGl0YWxpemF0aW9uLCBwbGFjZWhvbGRlciB0ZXh0LCBhbmQgZGlmZmVyZW50IGtleWJvYXJkXG4gKiB0eXBlcywgc3VjaCBhcyBhIG51bWVyaWMga2V5cGFkLlxuICpcbiAqIFRoZSBzaW1wbGVzdCB1c2UgY2FzZSBpcyB0byBwbG9wIGRvd24gYSBgVGV4dElucHV0YCBhbmQgc3Vic2NyaWJlIHRvIHRoZVxuICogYG9uQ2hhbmdlVGV4dGAgZXZlbnRzIHRvIHJlYWQgdGhlIHVzZXIgaW5wdXQuIFRoZXJlIGFyZSBhbHNvIG90aGVyIGV2ZW50cyxcbiAqIHN1Y2ggYXMgYG9uU3VibWl0RWRpdGluZ2AgYW5kIGBvbkZvY3VzYCB0aGF0IGNhbiBiZSBzdWJzY3JpYmVkIHRvLiBBIHNpbXBsZVxuICogZXhhbXBsZTpcbiAqXG4gKiBgYGBSZWFjdE5hdGl2ZVdlYlBsYXllclxuICogaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbiAqIGltcG9ydCB7IEFwcFJlZ2lzdHJ5LCBUZXh0SW5wdXQgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuICpcbiAqIGV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZWxlc3NUZXh0SW5wdXQgZXh0ZW5kcyBDb21wb25lbnQge1xuICogICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICogICAgIHN1cGVyKHByb3BzKTtcbiAqICAgICB0aGlzLnN0YXRlID0geyB0ZXh0OiAnVXNlbGVzcyBQbGFjZWhvbGRlcicgfTtcbiAqICAgfVxuICpcbiAqICAgcmVuZGVyKCkge1xuICogICAgIHJldHVybiAoXG4gKiAgICAgICA8VGV4dElucHV0XG4gKiAgICAgICAgIHN0eWxlPXt7aGVpZ2h0OiA0MCwgYm9yZGVyQ29sb3I6ICdncmF5JywgYm9yZGVyV2lkdGg6IDF9fVxuICogICAgICAgICBvbkNoYW5nZVRleHQ9eyh0ZXh0KSA9PiB0aGlzLnNldFN0YXRlKHt0ZXh0fSl9XG4gKiAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnRleHR9XG4gKiAgICAgICAvPlxuICogICAgICk7XG4gKiAgIH1cbiAqIH1cbiAqXG4gKiAvLyBza2lwIHRoaXMgbGluZSBpZiB1c2luZyBDcmVhdGUgUmVhY3QgTmF0aXZlIEFwcFxuICogQXBwUmVnaXN0cnkucmVnaXN0ZXJDb21wb25lbnQoJ0F3ZXNvbWVQcm9qZWN0JywgKCkgPT4gVXNlbGVzc1RleHRJbnB1dCk7XG4gKiBgYGBcbiAqXG4gKiBUd28gbWV0aG9kcyBleHBvc2VkIHZpYSB0aGUgbmF0aXZlIGVsZW1lbnQgYXJlIC5mb2N1cygpIGFuZCAuYmx1cigpIHRoYXRcbiAqIHdpbGwgZm9jdXMgb3IgYmx1ciB0aGUgVGV4dElucHV0IHByb2dyYW1tYXRpY2FsbHkuXG4gKlxuICogTm90ZSB0aGF0IHNvbWUgcHJvcHMgYXJlIG9ubHkgYXZhaWxhYmxlIHdpdGggYG11bHRpbGluZT17dHJ1ZS9mYWxzZX1gLlxuICogQWRkaXRpb25hbGx5LCBib3JkZXIgc3R5bGVzIHRoYXQgYXBwbHkgdG8gb25seSBvbmUgc2lkZSBvZiB0aGUgZWxlbWVudFxuICogKGUuZy4sIGBib3JkZXJCb3R0b21Db2xvcmAsIGBib3JkZXJMZWZ0V2lkdGhgLCBldGMuKSB3aWxsIG5vdCBiZSBhcHBsaWVkIGlmXG4gKiBgbXVsdGlsaW5lPWZhbHNlYC4gVG8gYWNoaWV2ZSB0aGUgc2FtZSBlZmZlY3QsIHlvdSBjYW4gd3JhcCB5b3VyIGBUZXh0SW5wdXRgXG4gKiBpbiBhIGBWaWV3YDpcbiAqXG4gKiBgYGBSZWFjdE5hdGl2ZVdlYlBsYXllclxuICogaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbiAqIGltcG9ydCB7IEFwcFJlZ2lzdHJ5LCBWaWV3LCBUZXh0SW5wdXQgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuICpcbiAqIGNsYXNzIFVzZWxlc3NUZXh0SW5wdXQgZXh0ZW5kcyBDb21wb25lbnQge1xuICogICByZW5kZXIoKSB7XG4gKiAgICAgcmV0dXJuIChcbiAqICAgICAgIDxUZXh0SW5wdXRcbiAqICAgICAgICAgey4uLnRoaXMucHJvcHN9IC8vIEluaGVyaXQgYW55IHByb3BzIHBhc3NlZCB0byBpdDsgZS5nLiwgbXVsdGlsaW5lLCBudW1iZXJPZkxpbmVzIGJlbG93XG4gKiAgICAgICAgIGVkaXRhYmxlID0ge3RydWV9XG4gKiAgICAgICAgIG1heExlbmd0aCA9IHs0MH1cbiAqICAgICAgIC8+XG4gKiAgICAgKTtcbiAqICAgfVxuICogfVxuICpcbiAqIGV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZWxlc3NUZXh0SW5wdXRNdWx0aWxpbmUgZXh0ZW5kcyBDb21wb25lbnQge1xuICogICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICogICAgIHN1cGVyKHByb3BzKTtcbiAqICAgICB0aGlzLnN0YXRlID0ge1xuICogICAgICAgdGV4dDogJ1VzZWxlc3MgTXVsdGlsaW5lIFBsYWNlaG9sZGVyJyxcbiAqICAgICB9O1xuICogICB9XG4gKlxuICogICAvLyBJZiB5b3UgdHlwZSBzb21ldGhpbmcgaW4gdGhlIHRleHQgYm94IHRoYXQgaXMgYSBjb2xvciwgdGhlIGJhY2tncm91bmQgd2lsbCBjaGFuZ2UgdG8gdGhhdFxuICogICAvLyBjb2xvci5cbiAqICAgcmVuZGVyKCkge1xuICogICAgIHJldHVybiAoXG4gKiAgICAgIDxWaWV3IHN0eWxlPXt7XG4gKiAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGlzLnN0YXRlLnRleHQsXG4gKiAgICAgICAgYm9yZGVyQm90dG9tQ29sb3I6ICcjMDAwMDAwJyxcbiAqICAgICAgICBib3JkZXJCb3R0b21XaWR0aDogMSB9fVxuICogICAgICA+XG4gKiAgICAgICAgPFVzZWxlc3NUZXh0SW5wdXRcbiAqICAgICAgICAgIG11bHRpbGluZSA9IHt0cnVlfVxuICogICAgICAgICAgbnVtYmVyT2ZMaW5lcyA9IHs0fVxuICogICAgICAgICAgb25DaGFuZ2VUZXh0PXsodGV4dCkgPT4gdGhpcy5zZXRTdGF0ZSh7dGV4dH0pfVxuICogICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudGV4dH1cbiAqICAgICAgICAvPlxuICogICAgICA8L1ZpZXc+XG4gKiAgICAgKTtcbiAqICAgfVxuICogfVxuICpcbiAqIC8vIHNraXAgdGhlc2UgbGluZXMgaWYgdXNpbmcgQ3JlYXRlIFJlYWN0IE5hdGl2ZSBBcHBcbiAqIEFwcFJlZ2lzdHJ5LnJlZ2lzdGVyQ29tcG9uZW50KFxuICogICdBd2Vzb21lUHJvamVjdCcsXG4gKiAgKCkgPT4gVXNlbGVzc1RleHRJbnB1dE11bHRpbGluZVxuICogKTtcbiAqIGBgYFxuICpcbiAqIGBUZXh0SW5wdXRgIGhhcyBieSBkZWZhdWx0IGEgYm9yZGVyIGF0IHRoZSBib3R0b20gb2YgaXRzIHZpZXcuIFRoaXMgYm9yZGVyXG4gKiBoYXMgaXRzIHBhZGRpbmcgc2V0IGJ5IHRoZSBiYWNrZ3JvdW5kIGltYWdlIHByb3ZpZGVkIGJ5IHRoZSBzeXN0ZW0sIGFuZCBpdFxuICogY2Fubm90IGJlIGNoYW5nZWQuIFNvbHV0aW9ucyB0byBhdm9pZCB0aGlzIGlzIHRvIGVpdGhlciBub3Qgc2V0IGhlaWdodFxuICogZXhwbGljaXRseSwgY2FzZSBpbiB3aGljaCB0aGUgc3lzdGVtIHdpbGwgdGFrZSBjYXJlIG9mIGRpc3BsYXlpbmcgdGhlIGJvcmRlclxuICogaW4gdGhlIGNvcnJlY3QgcG9zaXRpb24sIG9yIHRvIG5vdCBkaXNwbGF5IHRoZSBib3JkZXIgYnkgc2V0dGluZ1xuICogYHVuZGVybGluZUNvbG9yQW5kcm9pZGAgdG8gdHJhbnNwYXJlbnQuXG4gKlxuICogTm90ZSB0aGF0IG9uIEFuZHJvaWQgcGVyZm9ybWluZyB0ZXh0IHNlbGVjdGlvbiBpbiBpbnB1dCBjYW4gY2hhbmdlXG4gKiBhcHAncyBhY3Rpdml0eSBgd2luZG93U29mdElucHV0TW9kZWAgcGFyYW0gdG8gYGFkanVzdFJlc2l6ZWAuXG4gKiBUaGlzIG1heSBjYXVzZSBpc3N1ZXMgd2l0aCBjb21wb25lbnRzIHRoYXQgaGF2ZSBwb3NpdGlvbjogJ2Fic29sdXRlJ1xuICogd2hpbGUga2V5Ym9hcmQgaXMgYWN0aXZlLiBUbyBhdm9pZCB0aGlzIGJlaGF2aW9yIGVpdGhlciBzcGVjaWZ5IGB3aW5kb3dTb2Z0SW5wdXRNb2RlYFxuICogaW4gQW5kcm9pZE1hbmlmZXN0LnhtbCAoIGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL2d1aWRlL3RvcGljcy9tYW5pZmVzdC9hY3Rpdml0eS1lbGVtZW50Lmh0bWwgKVxuICogb3IgY29udHJvbCB0aGlzIHBhcmFtIHByb2dyYW1tYXRpY2FsbHkgd2l0aCBuYXRpdmUgY29kZS5cbiAqXG4gKi9cbmZ1bmN0aW9uIEludGVybmFsVGV4dElucHV0KHByb3BzOiBQcm9wcyk6IFJlYWN0Lk5vZGUge1xuICBjb25zdCBpbnB1dFJlZiA9IHVzZVJlZjxudWxsIHwgUmVhY3QuRWxlbWVudFJlZjxIb3N0Q29tcG9uZW50PG1peGVkPj4+KG51bGwpO1xuXG4gIC8vIEFuZHJvaWQgc2VuZHMgYSBcIm9uVGV4dENoYW5nZWRcIiBldmVudCBmb2xsb3dlZCBieSBhIFwib25TZWxlY3Rpb25DaGFuZ2VkXCIgZXZlbnQsIGZvclxuICAvLyB0aGUgc2FtZSBcIm1vc3QgcmVjZW50IGV2ZW50IGNvdW50XCIuXG4gIC8vIEZvciBjb250cm9sbGVkIHNlbGVjdGlvbiwgdGhhdCBtZWFucyB0aGF0IGltbWVkaWF0ZWx5IGFmdGVyIHRleHQgaXMgdXBkYXRlZCxcbiAgLy8gYSBjb250cm9sbGVkIGNvbXBvbmVudCB3aWxsIHBhc3MgaW4gdGhlICpwcmV2aW91cyogc2VsZWN0aW9uLCBldmVuIGlmIHRoZSBjb250cm9sbGVkXG4gIC8vIGNvbXBvbmVudCBkaWRuJ3QgbWVhbiB0byBtb2RpZnkgdGhlIHNlbGVjdGlvbiBhdCBhbGwuXG4gIC8vIFRoZXJlZm9yZSwgd2UgaWdub3JlIHNlbGVjdGlvbnMgYW5kIHBhc3MgdGhlbSB0aHJvdWdoIHVudGlsIHRoZSBzZWxlY3Rpb24gZXZlbnQgaGFzXG4gIC8vIGJlZW4gc2VudC5cbiAgLy8gTm90ZSB0aGF0IHRoaXMgbWl0aWdhdGlvbiBpcyBOT1QgbmVlZGVkIGZvciBGYWJyaWMuXG4gIGxldCBzZWxlY3Rpb246ID9TZWxlY3Rpb24gPVxuICAgIHByb3BzLnNlbGVjdGlvbiA9PSBudWxsXG4gICAgICA/IG51bGxcbiAgICAgIDoge1xuICAgICAgICAgIHN0YXJ0OiBwcm9wcy5zZWxlY3Rpb24uc3RhcnQsXG4gICAgICAgICAgZW5kOiBwcm9wcy5zZWxlY3Rpb24uZW5kID8/IHByb3BzLnNlbGVjdGlvbi5zdGFydCxcbiAgICAgICAgfTtcblxuICBjb25zdCBbbW9zdFJlY2VudEV2ZW50Q291bnQsIHNldE1vc3RSZWNlbnRFdmVudENvdW50XSA9IHVzZVN0YXRlPG51bWJlcj4oMCk7XG5cbiAgY29uc3QgW2xhc3ROYXRpdmVUZXh0LCBzZXRMYXN0TmF0aXZlVGV4dF0gPSB1c2VTdGF0ZTw/U3RyaW5naXNoPihwcm9wcy52YWx1ZSk7XG4gIGNvbnN0IFtsYXN0TmF0aXZlU2VsZWN0aW9uU3RhdGUsIHNldExhc3ROYXRpdmVTZWxlY3Rpb25dID0gdXNlU3RhdGU8e3xcbiAgICBzZWxlY3Rpb246ID9TZWxlY3Rpb24sXG4gICAgbW9zdFJlY2VudEV2ZW50Q291bnQ6IG51bWJlcixcbiAgfH0+KHtzZWxlY3Rpb24sIG1vc3RSZWNlbnRFdmVudENvdW50fSk7XG5cbiAgY29uc3QgbGFzdE5hdGl2ZVNlbGVjdGlvbiA9IGxhc3ROYXRpdmVTZWxlY3Rpb25TdGF0ZS5zZWxlY3Rpb247XG4gIGNvbnN0IGxhc3ROYXRpdmVTZWxlY3Rpb25FdmVudENvdW50ID1cbiAgICBsYXN0TmF0aXZlU2VsZWN0aW9uU3RhdGUubW9zdFJlY2VudEV2ZW50Q291bnQ7XG5cbiAgaWYgKGxhc3ROYXRpdmVTZWxlY3Rpb25FdmVudENvdW50IDwgbW9zdFJlY2VudEV2ZW50Q291bnQpIHtcbiAgICBzZWxlY3Rpb24gPSBudWxsO1xuICB9XG5cbiAgbGV0IHZpZXdDb21tYW5kczogVGV4dElucHV0TmF0aXZlQ29tbWFuZHM8SG9zdENvbXBvbmVudDxhbnk+PjtcbiAgaWYgKEFuZHJvaWRUZXh0SW5wdXRDb21tYW5kcykge1xuICAgIHZpZXdDb21tYW5kcyA9IEFuZHJvaWRUZXh0SW5wdXRDb21tYW5kcztcbiAgfSBlbHNlIHtcbiAgICB2aWV3Q29tbWFuZHMgPSBwcm9wcy5tdWx0aWxpbmVcbiAgICAgID8gUkNUTXVsdGlsaW5lVGV4dElucHV0TmF0aXZlQ29tbWFuZHNcbiAgICAgIDogUkNUU2luZ2xlbGluZVRleHRJbnB1dE5hdGl2ZUNvbW1hbmRzO1xuICB9XG5cbiAgY29uc3QgdGV4dCA9XG4gICAgdHlwZW9mIHByb3BzLnZhbHVlID09PSAnc3RyaW5nJ1xuICAgICAgPyBwcm9wcy52YWx1ZVxuICAgICAgOiB0eXBlb2YgcHJvcHMuZGVmYXVsdFZhbHVlID09PSAnc3RyaW5nJ1xuICAgICAgPyBwcm9wcy5kZWZhdWx0VmFsdWVcbiAgICAgIDogJyc7XG5cbiAgLy8gVGhpcyBpcyBuZWNlc3NhcnkgaW4gY2FzZSBuYXRpdmUgdXBkYXRlcyB0aGUgdGV4dCBhbmQgSlMgZGVjaWRlc1xuICAvLyB0aGF0IHRoZSB1cGRhdGUgc2hvdWxkIGJlIGlnbm9yZWQgYW5kIHdlIHNob3VsZCBzdGljayB3aXRoIHRoZSB2YWx1ZVxuICAvLyB0aGF0IHdlIGhhdmUgaW4gSlMuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgbmF0aXZlVXBkYXRlID0ge307XG5cbiAgICBpZiAobGFzdE5hdGl2ZVRleHQgIT09IHByb3BzLnZhbHVlICYmIHR5cGVvZiBwcm9wcy52YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG5hdGl2ZVVwZGF0ZS50ZXh0ID0gcHJvcHMudmFsdWU7XG4gICAgICBzZXRMYXN0TmF0aXZlVGV4dChwcm9wcy52YWx1ZSk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgc2VsZWN0aW9uICYmXG4gICAgICBsYXN0TmF0aXZlU2VsZWN0aW9uICYmXG4gICAgICAobGFzdE5hdGl2ZVNlbGVjdGlvbi5zdGFydCAhPT0gc2VsZWN0aW9uLnN0YXJ0IHx8XG4gICAgICAgIGxhc3ROYXRpdmVTZWxlY3Rpb24uZW5kICE9PSBzZWxlY3Rpb24uZW5kKVxuICAgICkge1xuICAgICAgbmF0aXZlVXBkYXRlLnNlbGVjdGlvbiA9IHNlbGVjdGlvbjtcbiAgICAgIHNldExhc3ROYXRpdmVTZWxlY3Rpb24oe3NlbGVjdGlvbiwgbW9zdFJlY2VudEV2ZW50Q291bnR9KTtcbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXMobmF0aXZlVXBkYXRlKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaW5wdXRSZWYuY3VycmVudCAhPSBudWxsKSB7XG4gICAgICB2aWV3Q29tbWFuZHMuc2V0VGV4dEFuZFNlbGVjdGlvbihcbiAgICAgICAgaW5wdXRSZWYuY3VycmVudCxcbiAgICAgICAgbW9zdFJlY2VudEV2ZW50Q291bnQsXG4gICAgICAgIHRleHQsXG4gICAgICAgIHNlbGVjdGlvbj8uc3RhcnQgPz8gLTEsXG4gICAgICAgIHNlbGVjdGlvbj8uZW5kID8/IC0xLFxuICAgICAgKTtcbiAgICB9XG4gIH0sIFtcbiAgICBtb3N0UmVjZW50RXZlbnRDb3VudCxcbiAgICBpbnB1dFJlZixcbiAgICBwcm9wcy52YWx1ZSxcbiAgICBwcm9wcy5kZWZhdWx0VmFsdWUsXG4gICAgbGFzdE5hdGl2ZVRleHQsXG4gICAgc2VsZWN0aW9uLFxuICAgIGxhc3ROYXRpdmVTZWxlY3Rpb24sXG4gICAgdGV4dCxcbiAgICB2aWV3Q29tbWFuZHMsXG4gIF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaW5wdXRSZWZWYWx1ZSA9IGlucHV0UmVmLmN1cnJlbnQ7XG5cbiAgICBpZiAoaW5wdXRSZWZWYWx1ZSAhPSBudWxsKSB7XG4gICAgICBUZXh0SW5wdXRTdGF0ZS5yZWdpc3RlcklucHV0KGlucHV0UmVmVmFsdWUpO1xuXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBUZXh0SW5wdXRTdGF0ZS51bnJlZ2lzdGVySW5wdXQoaW5wdXRSZWZWYWx1ZSk7XG4gICAgICB9O1xuICAgIH1cbiAgfSwgW2lucHV0UmVmXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBXaGVuIHVubW91bnRpbmcgd2UgbmVlZCB0byBibHVyIHRoZSBpbnB1dFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoaXNGb2N1c2VkKCkpIHtcbiAgICAgICAgbnVsbHRocm93cyhpbnB1dFJlZi5jdXJyZW50KS5ibHVyKCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2lucHV0UmVmXSk7XG5cbiAgZnVuY3Rpb24gY2xlYXIoKTogdm9pZCB7XG4gICAgaWYgKGlucHV0UmVmLmN1cnJlbnQgIT0gbnVsbCkge1xuICAgICAgdmlld0NvbW1hbmRzLnNldFRleHRBbmRTZWxlY3Rpb24oXG4gICAgICAgIGlucHV0UmVmLmN1cnJlbnQsXG4gICAgICAgIG1vc3RSZWNlbnRFdmVudENvdW50LFxuICAgICAgICAnJyxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLy8gVE9ETzogRml4IHRoaXMgcmV0dXJuaW5nIHRydWUgb24gbnVsbCA9PT0gbnVsbCwgd2hlbiBubyBpbnB1dCBpcyBmb2N1c2VkXG4gIGZ1bmN0aW9uIGlzRm9jdXNlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gVGV4dElucHV0U3RhdGUuY3VycmVudGx5Rm9jdXNlZElucHV0KCkgPT09IGlucHV0UmVmLmN1cnJlbnQ7XG4gIH1cblxuICBmdW5jdGlvbiBnZXROYXRpdmVSZWYoKTogP1JlYWN0LkVsZW1lbnRSZWY8SG9zdENvbXBvbmVudDxtaXhlZD4+IHtcbiAgICByZXR1cm4gaW5wdXRSZWYuY3VycmVudDtcbiAgfVxuXG4gIGNvbnN0IF9zZXROYXRpdmVSZWYgPSBzZXRBbmRGb3J3YXJkUmVmKHtcbiAgICBnZXRGb3J3YXJkZWRSZWY6ICgpID0+IHByb3BzLmZvcndhcmRlZFJlZixcbiAgICBzZXRMb2NhbFJlZjogcmVmID0+IHtcbiAgICAgIGlucHV0UmVmLmN1cnJlbnQgPSByZWY7XG5cbiAgICAgIC8qXG4gICAgICAgIEhpIHJlYWRlciBmcm9tIHRoZSBmdXR1cmUuIEknbSBzb3JyeSBmb3IgdGhpcy5cblxuICAgICAgICBUaGlzIGlzIGEgaGFjay4gSWRlYWxseSB3ZSB3b3VsZCBmb3J3YXJkUmVmIHRvIHRoZSB1bmRlcmx5aW5nXG4gICAgICAgIGhvc3QgY29tcG9uZW50LiBIb3dldmVyLCBzaW5jZSBUZXh0SW5wdXQgaGFzIGl0J3Mgb3duIG1ldGhvZHMgdGhhdCBjYW4gYmVcbiAgICAgICAgY2FsbGVkIGFzIHdlbGwsIGlmIHdlIHVzZWQgdGhlIHN0YW5kYXJkIGZvcndhcmRSZWYgdGhlbiB0aGVzZVxuICAgICAgICBtZXRob2RzIHdvdWxkbid0IGJlIGFjY2Vzc2libGUgYW5kIHRodXMgYmUgYSBicmVha2luZyBjaGFuZ2UuXG5cbiAgICAgICAgV2UgaGF2ZSBhIGNvdXBsZSBvZiBvcHRpb25zIG9mIGhvdyB0byBoYW5kbGUgdGhpczpcbiAgICAgICAgLSBSZXR1cm4gYSBuZXcgcmVmIHdpdGggZXZlcnl0aGluZyB3ZSBtZXRob2RzIGZyb20gYm90aC4gVGhpcyBpcyBwcm9ibGVtYXRpY1xuICAgICAgICAgIGJlY2F1c2Ugd2UgbmVlZCBSZWFjdCB0byBhbHNvIGtub3cgaXQgaXMgYSBob3N0IGNvbXBvbmVudCB3aGljaCByZXF1aXJlc1xuICAgICAgICAgIGludGVybmFscyBvZiB0aGUgY2xhc3MgaW1wbGVtZW50YXRpb24gb2YgdGhlIHJlZi5cbiAgICAgICAgLSBCcmVhayB0aGUgQVBJIGFuZCBoYXZlIHNvbWUgb3RoZXIgd2F5IHRvIGNhbGwgb25lIHNldCBvZiB0aGUgbWV0aG9kcyBvclxuICAgICAgICAgIHRoZSBvdGhlci4gVGhpcyBpcyBvdXIgbG9uZyB0ZXJtIGFwcHJvYWNoIGFzIHdlIHdhbnQgdG8gZXZlbnR1YWxseVxuICAgICAgICAgIGdldCB0aGUgbWV0aG9kcyBvbiBob3N0IGNvbXBvbmVudHMgb2ZmIHRoZSByZWYuIFNvIGluc3RlYWQgb2YgY2FsbGluZ1xuICAgICAgICAgIHJlZi5tZWFzdXJlKCkgeW91IG1pZ2h0IGNhbGwgUmVhY3ROYXRpdmUubWVhc3VyZShyZWYpLiBUaGlzIHdvdWxkIGhvcGVmdWxseVxuICAgICAgICAgIGxldCB0aGUgcmVmIGZvciBUZXh0SW5wdXQgdGhlbiBoYXZlIHRoZSBtZXRob2RzIGxpa2UgYC5jbGVhcmAuIE9yIHdlIGRvIGl0XG4gICAgICAgICAgdGhlIG90aGVyIHdheSBhbmQgbWFrZSBpdCBUZXh0SW5wdXQuY2xlYXIodGV4dElucHV0UmVmKSB3aGljaCB3b3VsZCBiZSBmaW5lXG4gICAgICAgICAgdG9vLiBFaXRoZXIgd2F5IHRob3VnaCBpcyBhIGJyZWFraW5nIGNoYW5nZSB0aGF0IGlzIGxvbmdlciB0ZXJtLlxuICAgICAgICAtIE11dGF0ZSB0aGlzIHJlZi4gOiggR3Jvc3MsIGJ1dCBhY2NvbXBsaXNoZXMgd2hhdCB3ZSBuZWVkIGluIHRoZSBtZWFudGltZVxuICAgICAgICAgIGJlZm9yZSB3ZSBjYW4gZ2V0IHRvIHRoZSBsb25nIHRlcm0gYnJlYWtpbmcgY2hhbmdlLlxuICAgICAgICAqL1xuICAgICAgaWYgKHJlZikge1xuICAgICAgICByZWYuY2xlYXIgPSBjbGVhcjtcbiAgICAgICAgcmVmLmlzRm9jdXNlZCA9IGlzRm9jdXNlZDtcbiAgICAgICAgcmVmLmdldE5hdGl2ZVJlZiA9IGdldE5hdGl2ZVJlZjtcbiAgICAgIH1cbiAgICB9LFxuICB9KTtcblxuICBjb25zdCBfb25QcmVzcyA9IChldmVudDogUHJlc3NFdmVudCkgPT4ge1xuICAgIGlmIChwcm9wcy5lZGl0YWJsZSB8fCBwcm9wcy5lZGl0YWJsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBudWxsdGhyb3dzKGlucHV0UmVmLmN1cnJlbnQpLmZvY3VzKCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IF9vbkNoYW5nZSA9IChldmVudDogQ2hhbmdlRXZlbnQpID0+IHtcbiAgICBjb25zdCB0ZXh0ID0gZXZlbnQubmF0aXZlRXZlbnQudGV4dDtcbiAgICBwcm9wcy5vbkNoYW5nZSAmJiBwcm9wcy5vbkNoYW5nZShldmVudCk7XG4gICAgcHJvcHMub25DaGFuZ2VUZXh0ICYmIHByb3BzLm9uQ2hhbmdlVGV4dCh0ZXh0KTtcblxuICAgIGlmIChpbnB1dFJlZi5jdXJyZW50ID09IG51bGwpIHtcbiAgICAgIC8vIGNhbGxpbmcgYHByb3BzLm9uQ2hhbmdlYCBvciBgcHJvcHMub25DaGFuZ2VUZXh0YFxuICAgICAgLy8gbWF5IGNsZWFuIHVwIHRoZSBpbnB1dCBpdHNlbGYuIEV4aXRzIGhlcmUuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2V0TGFzdE5hdGl2ZVRleHQodGV4dCk7XG4gICAgLy8gVGhpcyBtdXN0IGhhcHBlbiBsYXN0LCBhZnRlciB3ZSBjYWxsIHNldExhc3ROYXRpdmVUZXh0LlxuICAgIC8vIERpZmZlcmVudCBvcmRlcmluZyBjYW4gY2F1c2UgYnVncyB3aGVuIGVkaXRpbmcgQW5kcm9pZFRleHRJbnB1dHNcbiAgICAvLyB3aXRoIG11bHRpcGxlIEZyYWdtZW50cy5cbiAgICAvLyBXZSBtdXN0IHVwZGF0ZSB0aGlzIHNvIHRoYXQgY29udHJvbGxlZCBpbnB1dCB1cGRhdGVzIHdvcmsuXG4gICAgc2V0TW9zdFJlY2VudEV2ZW50Q291bnQoZXZlbnQubmF0aXZlRXZlbnQuZXZlbnRDb3VudCk7XG4gIH07XG5cbiAgY29uc3QgX29uU2VsZWN0aW9uQ2hhbmdlID0gKGV2ZW50OiBTZWxlY3Rpb25DaGFuZ2VFdmVudCkgPT4ge1xuICAgIHByb3BzLm9uU2VsZWN0aW9uQ2hhbmdlICYmIHByb3BzLm9uU2VsZWN0aW9uQ2hhbmdlKGV2ZW50KTtcblxuICAgIGlmIChpbnB1dFJlZi5jdXJyZW50ID09IG51bGwpIHtcbiAgICAgIC8vIGNhbGxpbmcgYHByb3BzLm9uU2VsZWN0aW9uQ2hhbmdlYFxuICAgICAgLy8gbWF5IGNsZWFuIHVwIHRoZSBpbnB1dCBpdHNlbGYuIEV4aXRzIGhlcmUuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2V0TGFzdE5hdGl2ZVNlbGVjdGlvbih7XG4gICAgICBzZWxlY3Rpb246IGV2ZW50Lm5hdGl2ZUV2ZW50LnNlbGVjdGlvbixcbiAgICAgIG1vc3RSZWNlbnRFdmVudENvdW50LFxuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IF9vbkZvY3VzID0gKGV2ZW50OiBGb2N1c0V2ZW50KSA9PiB7XG4gICAgVGV4dElucHV0U3RhdGUuZm9jdXNJbnB1dChpbnB1dFJlZi5jdXJyZW50KTtcbiAgICBpZiAocHJvcHMub25Gb2N1cykge1xuICAgICAgcHJvcHMub25Gb2N1cyhldmVudCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IF9vbkJsdXIgPSAoZXZlbnQ6IEJsdXJFdmVudCkgPT4ge1xuICAgIFRleHRJbnB1dFN0YXRlLmJsdXJJbnB1dChpbnB1dFJlZi5jdXJyZW50KTtcbiAgICBpZiAocHJvcHMub25CbHVyKSB7XG4gICAgICBwcm9wcy5vbkJsdXIoZXZlbnQpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBfb25TY3JvbGwgPSAoZXZlbnQ6IFNjcm9sbEV2ZW50KSA9PiB7XG4gICAgcHJvcHMub25TY3JvbGwgJiYgcHJvcHMub25TY3JvbGwoZXZlbnQpO1xuICB9O1xuXG4gIGxldCB0ZXh0SW5wdXQgPSBudWxsO1xuICBsZXQgYWRkaXRpb25hbFRvdWNoYWJsZVByb3BzOiB7fFxuICAgIHJlamVjdFJlc3BvbmRlclRlcm1pbmF0aW9uPzogJFByb3BlcnR5VHlwZTxcbiAgICAgIFByb3BzLFxuICAgICAgJ3JlamVjdFJlc3BvbmRlclRlcm1pbmF0aW9uJyxcbiAgICA+LFxuICAgIC8vIFRoaXMgaXMgYSBoYWNrIHRvIGxldCBGbG93IGtub3cgd2Ugd2FudCBhbiBleGFjdCBvYmplY3RcbiAgfH0gPSB7Li4ubnVsbH07XG5cbiAgaWYgKFBsYXRmb3JtLk9TID09PSAnaW9zJykge1xuICAgIGNvbnN0IFJDVFRleHRJbnB1dFZpZXcgPSBwcm9wcy5tdWx0aWxpbmVcbiAgICAgID8gUkNUTXVsdGlsaW5lVGV4dElucHV0Vmlld1xuICAgICAgOiBSQ1RTaW5nbGVsaW5lVGV4dElucHV0VmlldztcblxuICAgIGNvbnN0IHN0eWxlID0gcHJvcHMubXVsdGlsaW5lXG4gICAgICA/IFtzdHlsZXMubXVsdGlsaW5lSW5wdXQsIHByb3BzLnN0eWxlXVxuICAgICAgOiBwcm9wcy5zdHlsZTtcblxuICAgIGFkZGl0aW9uYWxUb3VjaGFibGVQcm9wcy5yZWplY3RSZXNwb25kZXJUZXJtaW5hdGlvbiA9XG4gICAgICBwcm9wcy5yZWplY3RSZXNwb25kZXJUZXJtaW5hdGlvbjtcblxuICAgIHRleHRJbnB1dCA9IChcbiAgICAgIDxSQ1RUZXh0SW5wdXRWaWV3XG4gICAgICAgIHJlZj17X3NldE5hdGl2ZVJlZn1cbiAgICAgICAgey4uLnByb3BzfVxuICAgICAgICBkYXRhRGV0ZWN0b3JUeXBlcz17cHJvcHMuZGF0YURldGVjdG9yVHlwZXN9XG4gICAgICAgIG1vc3RSZWNlbnRFdmVudENvdW50PXttb3N0UmVjZW50RXZlbnRDb3VudH1cbiAgICAgICAgb25CbHVyPXtfb25CbHVyfVxuICAgICAgICBvbkNoYW5nZT17X29uQ2hhbmdlfVxuICAgICAgICBvbkNvbnRlbnRTaXplQ2hhbmdlPXtwcm9wcy5vbkNvbnRlbnRTaXplQ2hhbmdlfVxuICAgICAgICBvbkZvY3VzPXtfb25Gb2N1c31cbiAgICAgICAgb25TY3JvbGw9e19vblNjcm9sbH1cbiAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e19vblNlbGVjdGlvbkNoYW5nZX1cbiAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2VTaG91bGRTZXRSZXNwb25kZXI9e2VtcHR5RnVuY3Rpb25UaGF0UmV0dXJuc1RydWV9XG4gICAgICAgIHNlbGVjdGlvbj17c2VsZWN0aW9ufVxuICAgICAgICBzdHlsZT17c3R5bGV9XG4gICAgICAgIHRleHQ9e3RleHR9XG4gICAgICAvPlxuICAgICk7XG4gIH0gZWxzZSBpZiAoUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJykge1xuICAgIGNvbnN0IHN0eWxlID0gW3Byb3BzLnN0eWxlXTtcbiAgICBjb25zdCBhdXRvQ2FwaXRhbGl6ZSA9IHByb3BzLmF1dG9DYXBpdGFsaXplIHx8ICdzZW50ZW5jZXMnO1xuICAgIGxldCBjaGlsZHJlbiA9IHByb3BzLmNoaWxkcmVuO1xuICAgIGxldCBjaGlsZENvdW50ID0gMDtcbiAgICBSZWFjdC5DaGlsZHJlbi5mb3JFYWNoKGNoaWxkcmVuLCAoKSA9PiArK2NoaWxkQ291bnQpO1xuICAgIGludmFyaWFudChcbiAgICAgICEocHJvcHMudmFsdWUgJiYgY2hpbGRDb3VudCksXG4gICAgICAnQ2Fubm90IHNwZWNpZnkgYm90aCB2YWx1ZSBhbmQgY2hpbGRyZW4uJyxcbiAgICApO1xuICAgIGlmIChjaGlsZENvdW50ID4gMSkge1xuICAgICAgY2hpbGRyZW4gPSA8VGV4dD57Y2hpbGRyZW59PC9UZXh0PjtcbiAgICB9XG5cbiAgICB0ZXh0SW5wdXQgPSAoXG4gICAgICAvKiAkRmxvd0ZpeE1lIHRoZSB0eXBlcyBmb3IgQW5kcm9pZFRleHRJbnB1dCBkb24ndCBtYXRjaCB1cCBleGFjdGx5IHdpdGhcbiAgICAgICAgdGhlIHByb3BzIGZvciBUZXh0SW5wdXQuIFRoaXMgd2lsbCBuZWVkIHRvIGdldCBmaXhlZCAqL1xuICAgICAgPEFuZHJvaWRUZXh0SW5wdXRcbiAgICAgICAgcmVmPXtfc2V0TmF0aXZlUmVmfVxuICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgIGF1dG9DYXBpdGFsaXplPXthdXRvQ2FwaXRhbGl6ZX1cbiAgICAgICAgY2hpbGRyZW49e2NoaWxkcmVufVxuICAgICAgICBkaXNhYmxlRnVsbHNjcmVlblVJPXtwcm9wcy5kaXNhYmxlRnVsbHNjcmVlblVJfVxuICAgICAgICBtb3N0UmVjZW50RXZlbnRDb3VudD17bW9zdFJlY2VudEV2ZW50Q291bnR9XG4gICAgICAgIG9uQmx1cj17X29uQmx1cn1cbiAgICAgICAgb25DaGFuZ2U9e19vbkNoYW5nZX1cbiAgICAgICAgb25Gb2N1cz17X29uRm9jdXN9XG4gICAgICAgIC8qICRGbG93Rml4TWUgdGhlIHR5cGVzIGZvciBBbmRyb2lkVGV4dElucHV0IGRvbid0IG1hdGNoIHVwIGV4YWN0bHlcbiAgICAgICAgICogd2l0aCB0aGUgcHJvcHMgZm9yIFRleHRJbnB1dC4gVGhpcyB3aWxsIG5lZWQgdG8gZ2V0IGZpeGVkICovXG4gICAgICAgIG9uU2Nyb2xsPXtfb25TY3JvbGx9XG4gICAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlPXtfb25TZWxlY3Rpb25DaGFuZ2V9XG4gICAgICAgIHNlbGVjdGlvbj17c2VsZWN0aW9ufVxuICAgICAgICBzdHlsZT17c3R5bGV9XG4gICAgICAgIHRleHQ9e3RleHR9XG4gICAgICAgIHRleHRCcmVha1N0cmF0ZWd5PXtwcm9wcy50ZXh0QnJlYWtTdHJhdGVneX1cbiAgICAgIC8+XG4gICAgKTtcbiAgfVxuICByZXR1cm4gKFxuICAgIDxUZXh0QW5jZXN0b3IuUHJvdmlkZXIgdmFsdWU9e3RydWV9PlxuICAgICAgPFRvdWNoYWJsZVdpdGhvdXRGZWVkYmFja1xuICAgICAgICBvbkxheW91dD17cHJvcHMub25MYXlvdXR9XG4gICAgICAgIG9uUHJlc3M9e19vblByZXNzfVxuICAgICAgICBhY2Nlc3NpYmxlPXtwcm9wcy5hY2Nlc3NpYmxlfVxuICAgICAgICBhY2Nlc3NpYmlsaXR5TGFiZWw9e3Byb3BzLmFjY2Vzc2liaWxpdHlMYWJlbH1cbiAgICAgICAgYWNjZXNzaWJpbGl0eVJvbGU9e3Byb3BzLmFjY2Vzc2liaWxpdHlSb2xlfVxuICAgICAgICBhY2Nlc3NpYmlsaXR5U3RhdGU9e3Byb3BzLmFjY2Vzc2liaWxpdHlTdGF0ZX1cbiAgICAgICAgbmF0aXZlSUQ9e3Byb3BzLm5hdGl2ZUlEfVxuICAgICAgICB0ZXN0SUQ9e3Byb3BzLnRlc3RJRH1cbiAgICAgICAgey4uLmFkZGl0aW9uYWxUb3VjaGFibGVQcm9wc30+XG4gICAgICAgIHt0ZXh0SW5wdXR9XG4gICAgICA8L1RvdWNoYWJsZVdpdGhvdXRGZWVkYmFjaz5cbiAgICA8L1RleHRBbmNlc3Rvci5Qcm92aWRlcj5cbiAgKTtcbn1cblxuY29uc3QgRXhwb3J0ZWRGb3J3YXJkUmVmOiBSZWFjdC5BYnN0cmFjdENvbXBvbmVudDxcbiAgUmVhY3QuRWxlbWVudENvbmZpZzx0eXBlb2YgSW50ZXJuYWxUZXh0SW5wdXQ+LFxuICBSZWFjdC5FbGVtZW50UmVmPEhvc3RDb21wb25lbnQ8bWl4ZWQ+PiAmIEltcGVyYXRpdmVNZXRob2RzLFxuPiA9IFJlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gVGV4dElucHV0KFxuICBwcm9wcyxcbiAgZm9yd2FyZGVkUmVmOiBSZWFjdFJlZlNldHRlcjxcbiAgICBSZWFjdC5FbGVtZW50UmVmPEhvc3RDb21wb25lbnQ8bWl4ZWQ+PiAmIEltcGVyYXRpdmVNZXRob2RzLFxuICA+LFxuKSB7XG4gIHJldHVybiA8SW50ZXJuYWxUZXh0SW5wdXQgey4uLnByb3BzfSBmb3J3YXJkZWRSZWY9e2ZvcndhcmRlZFJlZn0gLz47XG59KTtcblxuLy8gJEZsb3dGaXhNZVxuRXhwb3J0ZWRGb3J3YXJkUmVmLmRlZmF1bHRQcm9wcyA9IHtcbiAgYWxsb3dGb250U2NhbGluZzogdHJ1ZSxcbiAgcmVqZWN0UmVzcG9uZGVyVGVybWluYXRpb246IHRydWUsXG4gIHVuZGVybGluZUNvbG9yQW5kcm9pZDogJ3RyYW5zcGFyZW50Jyxcbn07XG5cbi8vIFRPRE86IERlcHJlY2F0ZSB0aGlzXG4vLyAkRmxvd0ZpeE1lXG5FeHBvcnRlZEZvcndhcmRSZWYucHJvcFR5cGVzID0gRGVwcmVjYXRlZFRleHRJbnB1dFByb3BUeXBlcztcblxuLy8gJEZsb3dGaXhNZVxuRXhwb3J0ZWRGb3J3YXJkUmVmLlN0YXRlID0ge1xuICBjdXJyZW50bHlGb2N1c2VkSW5wdXQ6IFRleHRJbnB1dFN0YXRlLmN1cnJlbnRseUZvY3VzZWRJbnB1dCxcblxuICBjdXJyZW50bHlGb2N1c2VkRmllbGQ6IFRleHRJbnB1dFN0YXRlLmN1cnJlbnRseUZvY3VzZWRGaWVsZCxcbiAgZm9jdXNUZXh0SW5wdXQ6IFRleHRJbnB1dFN0YXRlLmZvY3VzVGV4dElucHV0LFxuICBibHVyVGV4dElucHV0OiBUZXh0SW5wdXRTdGF0ZS5ibHVyVGV4dElucHV0LFxufTtcblxudHlwZSBUZXh0SW5wdXRDb21wb25lbnRTdGF0aWNzID0gJFJlYWRPbmx5PHt8XG4gIFN0YXRlOiAkUmVhZE9ubHk8e3xcbiAgICBjdXJyZW50bHlGb2N1c2VkSW5wdXQ6IHR5cGVvZiBUZXh0SW5wdXRTdGF0ZS5jdXJyZW50bHlGb2N1c2VkSW5wdXQsXG4gICAgY3VycmVudGx5Rm9jdXNlZEZpZWxkOiB0eXBlb2YgVGV4dElucHV0U3RhdGUuY3VycmVudGx5Rm9jdXNlZEZpZWxkLFxuICAgIGZvY3VzVGV4dElucHV0OiB0eXBlb2YgVGV4dElucHV0U3RhdGUuZm9jdXNUZXh0SW5wdXQsXG4gICAgYmx1clRleHRJbnB1dDogdHlwZW9mIFRleHRJbnB1dFN0YXRlLmJsdXJUZXh0SW5wdXQsXG4gIHx9PixcbiAgcHJvcFR5cGVzOiB0eXBlb2YgRGVwcmVjYXRlZFRleHRJbnB1dFByb3BUeXBlcyxcbnx9PjtcblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICBtdWx0aWxpbmVJbnB1dDoge1xuICAgIC8vIFRoaXMgZGVmYXVsdCB0b3AgaW5zZXQgbWFrZXMgUkNUTXVsdGlsaW5lVGV4dElucHV0VmlldyBzZWVtIGFzIGNsb3NlIGFzIHBvc3NpYmxlXG4gICAgLy8gdG8gc2luZ2xlLWxpbmUgUkNUU2luZ2xlbGluZVRleHRJbnB1dFZpZXcgZGVmYXVsdHMsIHVzaW5nIHRoZSBzeXN0ZW0gZGVmYXVsdHNcbiAgICAvLyBvZiBmb250IHNpemUgMTcgYW5kIGEgaGVpZ2h0IG9mIDMxIHBvaW50cy5cbiAgICBwYWRkaW5nVG9wOiA1LFxuICB9LFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gKChFeHBvcnRlZEZvcndhcmRSZWY6IGFueSk6IFJlYWN0LkFic3RyYWN0Q29tcG9uZW50PFxuICBSZWFjdC5FbGVtZW50Q29uZmlnPHR5cGVvZiBJbnRlcm5hbFRleHRJbnB1dD4sXG4gICRSZWFkT25seTx7fFxuICAgIC4uLlJlYWN0LkVsZW1lbnRSZWY8SG9zdENvbXBvbmVudDxtaXhlZD4+LFxuICAgIC4uLkltcGVyYXRpdmVNZXRob2RzLFxuICB8fT4sXG4+ICZcbiAgVGV4dElucHV0Q29tcG9uZW50U3RhdGljcyk7XG4iXX0=